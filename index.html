<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Road Trip Games - Your Ultimate Travel Companion</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1e1e2e">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Road Trip">

    <!-- Prevent service worker caching -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <!-- App Version for automatic updates -->
    <script>window.APP_VERSION = '1.138.16';</script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Standard back button for all games */
        .game-back-btn {
            background: rgba(75, 85, 99, 0.9);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            z-index: 100;
        }
        .game-back-btn:hover {
            background: rgba(100, 116, 139, 0.9);
        }
        .game-back-btn:active {
            background: rgba(55, 65, 81, 0.9);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e1e2e 0%, #2d2d44 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            background: #1a1a2e;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
            border: 1px solid #3d3d5c;
        }

        .header {
            background: linear-gradient(135deg, #2d2d44 0%, #3d3d5c 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            border-bottom: 1px solid #4d4d6d;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: #a5b4fc;
        }

        .header p {
            opacity: 0.9;
            font-size: 1rem;
            color: #c4b5fd;
        }

        .content {
            padding: 2rem;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .feature-card {
            padding: 1.5rem;
            border-radius: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            filter: brightness(1.1);
        }

        .feature-card h3 {
            font-size: 1.4rem;
            margin-bottom: 0.5rem;
            color: #1f2937;
        }

        .feature-card p {
            color: #374151;
            font-size: 0.9rem;
        }

        .feature-card:nth-child(3n+1) {
            background: linear-gradient(135deg, #86efac 0%, #4ade80 100%);
            border: 1px solid #22c55e;
        }

        .feature-card:nth-child(3n+2) {
            background: linear-gradient(135deg, #93c5fd 0%, #60a5fa 100%);
            border: 1px solid #3b82f6;
        }

        .feature-card:nth-child(3n) {
            background: linear-gradient(135deg, #c4b5fd 0%, #a78bfa 100%);
            border: 1px solid #8b5cf6;
        }

        .welcome {
            text-align: center;
            padding: 2rem;
        }

        .welcome h2 {
            color: #a5b4fc;
            margin-bottom: 1rem;
            font-size: 1.8rem;
        }

        .welcome p {
            color: #c4b5fd;
            font-size: 1.15rem;
            line-height: 1.7;
            max-width: 600px;
            margin: 0 auto;
        }

        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #4caf50;
            color: white;
            padding: 1rem 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 10000;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .toast.show {
            opacity: 1;
            pointer-events: auto;
        }

        .pull-to-refresh {
            position: fixed;
            top: -60px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: #4b5563;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.4);
            transition: top 0.3s ease;
            z-index: 9999;
        }

        .pull-to-refresh.visible {
            top: 20px;
        }

        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid #6b7280;
            border-top: 3px solid #93c5fd;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }


        @media (max-width: 768px) {
            .header {
                padding: 0.75rem;
            }

            .header h1 {
                font-size: 1.2rem;
                margin-bottom: 0.25rem;
            }

            .header p {
                font-size: 0.8rem;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }

            .content {
                padding: 1rem;
            }

            body {
                padding: 10px;
            }
        }

        /* Confetti Animation */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            pointer-events: none;
            z-index: 9999;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        /* Bingo Stats Modal */
        .stats-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10001;
            padding: 1rem;
        }

        .stats-modal.show {
            display: flex;
        }

        .stats-content {
            background: #1f2937;
            color: #f9fafb;
            border-radius: 20px;
            padding: 2rem;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            border: 1px solid #374151;
        }

        .stats-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #374151;
        }

        .stats-player-card {
            background: linear-gradient(135deg, #4b5563 0%, #6b7280 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .stats-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
        }

        .stats-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .stats-value {
            font-size: 1.5rem;
            font-weight: bold;
        }

        /* Drug Wars Styles */
        #drugwarsPrices tr:nth-child(even) {
            background: rgba(255,255,255,0.05);
        }
    </style>
</head>
<body>
    <div id="updateToast" class="toast"></div>
    <div id="pullToRefresh" class="pull-to-refresh">
        <div class="spinner"></div>
    </div>
    <div class="app-container">
        <div class="header">
            <h1>ğŸš— Road Trip Games</h1>
            <p>Your Ultimate Travel Companion</p>
        </div>

        <div class="content">
            <div class="welcome">
                <h2>Welcome to Road Trip Games!</h2>
                <p>The all-in-one app for making your road trips more fun and memorable. Track license plates, play games, and learn interesting facts along the way!</p>
            </div>

            <div class="feature-grid">
                <div class="feature-card" onclick="showLicensePlateTracker()">
                    <h3>ğŸš™ License Plates</h3>
                    <p>Track all the state plates you spot on your journey</p>
                </div>

                <div class="feature-card" onclick="showTravelFacts()">
                    <h3>ğŸ“ Travel Facts</h3>
                    <p>Learn about each state you're traveling through</p>
                </div>

                <div class="feature-card" onclick="showArcadeMenu()">
                    <h3>ğŸ•¹ï¸ Arcade</h3>
                    <p>Classic retro action games</p>
                </div>

                <div class="feature-card" onclick="showStrategyMenu()">
                    <h3>ğŸ¯ Strategy</h3>
                    <p>Board games, puzzles, and cards</p>
                </div>

                <div class="feature-card" onclick="showWordGamesMenu()">
                    <h3>ğŸ“ Word Games</h3>
                    <p>Test your vocabulary with word puzzles</p>
                </div>

                <div class="feature-card" onclick="showOtherMenu()">
                    <h3>ğŸ² Other</h3>
                    <p>More fun games</p>
                </div>

                <div class="feature-card" onclick="showTravelBingo()">
                    <h3>ğŸ¯ Travel Bingo</h3>
                    <p>Spot common road trip sights and win!</p>
                </div>
            </div>

            <!-- Travel Bingo Mode Selection -->
            <div id="bingoModeSelection" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2 style="color: #a5b4fc;">ğŸ¯ Travel Bingo</h2>
                    <button onclick="showHome()" class="game-back-btn">â† Back</button>
                </div>

                <div style="text-align: center; margin-bottom: 2rem;">
                    <h3 style="color: #f1f5f9; margin-bottom: 1rem;">Choose Game Mode</h3>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; max-width: 600px; margin: 0 auto;">
                    <div onclick="startCompetitiveMode()" style="background: linear-gradient(135deg, #c4b5fd 0%, #a78bfa 100%); color: white; padding: 2rem; border-radius: 15px; text-align: center; cursor: pointer; transition: transform 0.2s; box-shadow: 0 4px 8px rgba(0,0,0,0.2);" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                        <h3 style="font-size: 2rem; margin-bottom: 1rem;">ğŸ Competitive</h3>
                        <p style="opacity: 0.9; margin-bottom: 0.5rem;">Same card, different colors</p>
                        <p style="opacity: 0.9;">Race to get 5 in a row first!</p>
                    </div>

                    <div onclick="startTeamMode()" style="background: linear-gradient(135deg, #86efac 0%, #4ade80 100%); color: white; padding: 2rem; border-radius: 15px; text-align: center; cursor: pointer; transition: transform 0.2s; box-shadow: 0 4px 8px rgba(0,0,0,0.2);" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                        <h3 style="font-size: 2rem; margin-bottom: 1rem;">ğŸ¤ Team</h3>
                        <p style="opacity: 0.9; margin-bottom: 0.5rem;">Work together</p>
                        <p style="opacity: 0.9;">Get bingo as a team!</p>
                    </div>
                </div>
            </div>

            <!-- Travel Bingo Name Entry (hidden by default) -->
            <div id="bingoNameEntry" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2 style="color: #a5b4fc;">ğŸ Enter Player Names</h2>
                    <button onclick="backToModeSelection()" class="game-back-btn">â† Back</button>
                </div>

                <div style="max-width: 500px; margin: 0 auto; background: rgba(255,255,255,0.05); padding: 2rem; border-radius: 15px; box-shadow: 0 4px 8px rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1);">
                    <p style="color: #94a3b8; text-align: center; margin-bottom: 2rem;">Enter names for both players to track your progress:</p>

                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; color: #007bff; font-weight: bold; margin-bottom: 0.5rem; font-size: 1.1rem;">ğŸ”µ Player 1 Name:</label>
                        <input type="text" id="player1NameInput" placeholder="Enter Player 1's name" maxlength="20" style="width: 100%; padding: 0.75rem; border: 2px solid #007bff; border-radius: 10px; font-size: 1rem; box-sizing: border-box;">
                    </div>

                    <div style="margin-bottom: 2rem;">
                        <label style="display: block; color: #c4b5fd; font-weight: bold; margin-bottom: 0.5rem; font-size: 1.1rem;">ğŸŸ£ Player 2 Name:</label>
                        <input type="text" id="player2NameInput" placeholder="Enter Player 2's name" maxlength="20" style="width: 100%; padding: 0.75rem; border: 2px solid #a78bfa; border-radius: 10px; font-size: 1rem; box-sizing: border-box;">
                    </div>

                    <button onclick="submitPlayerNames()" style="width: 100%; background: linear-gradient(135deg, #86efac 0%, #4ade80 100%); color: white; border: none; padding: 1rem 2rem; border-radius: 10px; cursor: pointer; font-size: 1.1rem; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">Start Game</button>

                    <p style="color: #64748b; font-size: 0.85rem; text-align: center; margin-top: 1rem;">You can change names later from the game screen</p>
                </div>
            </div>

            <!-- Travel Bingo Game Section (hidden by default) -->
            <div id="travelBingo" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2 id="bingoTitle">ğŸ¯ Travel Bingo</h2>
                    <button onclick="backToModeSelection()" class="game-back-btn">â† Back</button>
                </div>

                <!-- Player Selector for Competitive Mode -->
                <div id="bingoPlayerSelector" style="display: none; text-align: center; margin-bottom: 1rem;">
                    <p style="color: #94a3b8; margin-bottom: 0.5rem; font-size: 0.9rem;">I am:</p>
                    <div style="display: flex; gap: 1rem; justify-content: center; align-items: center; flex-wrap: wrap;">
                        <button id="selectPlayer1" onclick="selectPlayer(1)" style="background: linear-gradient(135deg, #007bff 0%, #0056b3 100%); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3); min-width: 120px;">ğŸ”µ <span id="player1ButtonName">Player 1</span></button>
                        <button id="selectPlayer2" onclick="selectPlayer(2)" style="background: linear-gradient(135deg, #c4b5fd 0%, #a78bfa 100%); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3); min-width: 120px; opacity: 0.5;">ğŸ”´ <span id="player2ButtonName">Player 2</span></button>
                        <button onclick="showNameEntry()" style="background: #6c757d; color: white; border: none; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer; font-size: 0.85rem;">âœï¸ Change Names</button>
                    </div>
                </div>

                <div id="bingoWinMessage" style="display: none; background: linear-gradient(135deg, #86efac 0%, #4ade80 100%); color: white; padding: 2rem; border-radius: 15px; margin-bottom: 2rem; text-align: center; animation: pulse 1s infinite;">
                    <h2 style="font-size: 3rem; margin-bottom: 1rem;">ğŸ‰ BINGO! ğŸ‰</h2>
                    <p id="bingoWinText" style="font-size: 1.5rem;">You got 5 in a row!</p>
                </div>

                <div style="max-width: 100%; margin: 0 auto; overflow: hidden;">
                    <div id="bingoGrid" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.1rem; background: #667eea; padding: 0.1rem; border-radius: 6px; box-shadow: 0 8px 16px rgba(0,0,0,0.2);"></div>

                    <div style="margin-top: 2rem; text-align: center;">
                        <button onclick="showThemeSelector()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 1rem 2rem; border-radius: 10px; cursor: pointer; font-size: 1.1rem; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">ğŸ¨ Choose Theme</button>
                        <button onclick="generateNewBingoCard()" style="background: linear-gradient(135deg, #86efac 0%, #4ade80 100%); color: white; border: none; padding: 1rem 2rem; border-radius: 10px; cursor: pointer; font-size: 1.1rem; font-weight: bold; margin-left: 1rem; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">ğŸ”„ New Card</button>
                        <button onclick="resetBingoCard()" style="background: linear-gradient(135deg, #c4b5fd 0%, #a78bfa 100%); color: white; border: none; padding: 1rem 2rem; border-radius: 10px; cursor: pointer; font-size: 1.1rem; font-weight: bold; margin-left: 1rem; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">â†º Clear Marks</button>
                        <button onclick="showBingoStats()" style="background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%); color: white; border: none; padding: 1rem 2rem; border-radius: 10px; cursor: pointer; font-size: 1.1rem; font-weight: bold; margin-left: 1rem; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">ğŸ“Š Stats</button>
                    </div>

                    <!-- Current Theme Indicator -->
                    <div id="currentThemeIndicator" style="text-align: center; margin-top: 1rem; color: #94a3b8; font-size: 0.9rem;">
                        Current theme: <span id="currentThemeName" style="font-weight: bold; color: #667eea;"></span>
                    </div>

                    <div id="bingoInstructions" style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 10px; margin-top: 2rem; border: 1px solid rgba(255,255,255,0.1);">
                        <h3 style="color: #f1f5f9; margin-bottom: 1rem;">How to Play:</h3>
                        <ul style="color: #94a3b8; line-height: 1.8;">
                            <li>Tap a square when you spot that item on your road trip</li>
                            <li>Get 5 in a row (horizontal, vertical, or diagonal) to win!</li>
                            <li>â­ BLACKOUT: Fill all 25 squares for an epic win!</li>
                            <li>The center square is a FREE space - already marked for you</li>
                            <li>Click "New Card" to generate a different set of items</li>
                            <li>Click "Clear Marks" to unmark all squares on current card</li>
                            <li>Click "Stats" to view your wins and achievements</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Bingo Stats Modal -->
            <div id="bingoStatsModal" class="stats-modal">
                <div class="stats-content">
                    <div class="stats-header">
                        <h2 style="color: #f1f5f9; margin: 0;">ğŸ“Š Bingo Statistics</h2>
                        <button onclick="closeBingoStats()" style="background: #8b5cf6; color: white; border: none; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: bold;">âœ• Close</button>
                    </div>
                    <div id="bingoStatsContent">
                        <!-- Stats will be rendered here -->
                    </div>
                    <div style="margin-top: 1.5rem; text-align: center;">
                        <button onclick="clearBingoStats()" style="background: #6c757d; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 0.9rem;">Clear All Stats</button>
                    </div>
                </div>
            </div>

            <!-- Theme Selector Modal -->
            <div id="themeSelectorModal" class="stats-modal">
                <div class="stats-content">
                    <div class="stats-header">
                        <h2 style="color: #f1f5f9; margin: 0;">ğŸ¨ Choose Bingo Theme</h2>
                        <button onclick="closeThemeSelector()" style="background: #8b5cf6; color: white; border: none; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: bold;">âœ• Close</button>
                    </div>
                    <p style="text-align: center; color: #94a3b8; margin-bottom: 1.5rem;">Select a theme for your bingo card:</p>
                    <div id="themeSelectorContent" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <!-- Theme cards will be rendered here -->
                    </div>
                </div>
            </div>

            <!-- Travel Facts Section (hidden by default) -->
            <div id="travelFacts" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2 style="color: #a5b4fc;">ğŸ“ Travel Facts</h2>
                    <button onclick="exitTravelFacts()" class="game-back-btn">â† Back</button>
                </div>

                <!-- State Selector (shown initially) -->
                <div id="stateSelector"></div>

                <!-- State Display (shown after selection) -->
                <div id="stateDisplay"></div>
            </div>

            <!-- License Plate Tracker Section (hidden by default) -->
            <div id="plateTracker" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2 style="color: #a5b4fc;">ğŸš™ License Plate Tracker</h2>
                    <button onclick="showHome()" class="game-back-btn">â† Back</button>
                </div>

                <div style="background: rgba(255,255,255,0.05); color: white; padding: 2rem; border-radius: 15px; margin-bottom: 2rem; border: 1px solid rgba(255,255,255,0.1);">
                    <div style="text-align: center; margin-bottom: 1.5rem;">
                        <h3 style="font-size: 2rem; margin-bottom: 0.5rem;" id="plateProgress">0 / 64</h3>
                        <p style="font-size: 1.1rem; color: #94a3b8;">Total Plates Collected</p>
                        <div style="background: rgba(255,255,255,0.1); height: 20px; border-radius: 10px; overflow: hidden; margin-top: 1rem;">
                            <div id="plateProgressBar" style="background: #60a5fa; height: 100%; width: 0%; transition: width 0.3s;"></div>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 2px solid rgba(255,255,255,0.3);">
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold;" id="usProgress">0 / 51</div>
                            <div style="font-size: 0.9rem; opacity: 0.9; margin-top: 0.25rem;">ğŸ‡ºğŸ‡¸ United States</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold;" id="canadaProgress">0 / 13</div>
                            <div style="font-size: 0.9rem; opacity: 0.9; margin-top: 0.25rem;">ğŸ‡¨ğŸ‡¦ Canada</div>
                        </div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                    <!-- US States Section -->
                    <div>
                        <h3 style="color: #60a5fa; margin-bottom: 1rem; font-size: 1.5rem;">ğŸ‡ºğŸ‡¸ United States</h3>
                        <div id="usStates"></div>
                    </div>

                    <!-- Canadian Provinces Section -->
                    <div>
                        <h3 style="color: #60a5fa; margin-bottom: 1rem; font-size: 1.5rem;">ğŸ‡¨ğŸ‡¦ Canada</h3>
                        <div id="canadaProvinces"></div>
                    </div>
                </div>
            </div>

            <!-- Arcade Games Menu Section (hidden by default) -->
            <div id="arcadeMenu" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2 style="color: #a5b4fc;">ğŸ•¹ï¸ Arcade Games</h2>
                    <button onclick="showHome()" class="game-back-btn">â† Back</button>
                </div>

                <div class="feature-grid">
                    <div class="feature-card" onclick="launchAsteroids()">
                        <h3>ğŸš€ Asteroids</h3>
                        <p>Classic 1979 vector arcade game!</p>
                    </div>

                    <div class="feature-card" onclick="launchBreakout()">
                        <h3>ğŸ§± Breakout</h3>
                        <p>Classic 1976 brick breaking arcade game!</p>
                    </div>

                    <div class="feature-card" onclick="launchCavernsOfMars()">
                        <h3>ğŸ”´ Caverns of Mars</h3>
                        <p>Classic 1981 vertical shooter - descend into Mars!</p>
                    </div>

                    <div class="feature-card" onclick="launchCentipede()">
                        <h3>ğŸ› Centipede</h3>
                        <p>Classic 1980 Atari arcade shooter!</p>
                    </div>

                    <div class="feature-card" onclick="launchDownhillSkier()">
                        <h3>â›·ï¸ Downhill Skier</h3>
                        <p>Ski down the mountain avoiding trees!</p>
                    </div>

                    <div class="feature-card" onclick="launchFrogger()">
                        <h3>ğŸ¸ Frogger</h3>
                        <p>Classic 1981 arcade game - hop to safety!</p>
                    </div>

                    <div class="feature-card" onclick="launchGalaga()">
                        <h3>ğŸ‘¾ Galaga</h3>
                        <p>1981 sequel with tractor beam & dual fighters!</p>
                    </div>

                    <div class="feature-card" onclick="launchGalaxian()">
                        <h3>ğŸš€ Galaxian</h3>
                        <p>Classic 1979 space shooter arcade game!</p>
                    </div>

                    <div class="feature-card" onclick="launchJoust()">
                        <h3>ğŸ¦¤ Joust</h3>
                        <p>Ride your ostrich to defeat enemy riders!</p>
                    </div>

                    <div class="feature-card" onclick="launchPacman()">
                        <h3>ğŸŸ¡ Pac-Man</h3>
                        <p>Eat dots and avoid ghosts in the maze!</p>
                    </div>

                    <div class="feature-card" onclick="launchQix()">
                        <h3>ğŸ¨ Qix</h3>
                        <p>Classic 1981 drawing puzzle game!</p>
                    </div>

                    <div class="feature-card" onclick="launchSnake()">
                        <h3>ğŸ Snake</h3>
                        <p>Classic arcade game - eat and grow!</p>
                    </div>

                    <div class="feature-card" onclick="launchTunnelRunner()">
                        <h3>ğŸš€ Tunnel Runner</h3>
                        <p>Fly your rocket through the tunnel!</p>
                    </div>
                </div>
            </div>

            <!-- Strategy Games Menu Section (hidden by default) -->
            <div id="strategyMenu" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2 style="color: #a5b4fc;">ğŸ¯ Strategy Games</h2>
                    <button onclick="showHome()" class="game-back-btn">â† Back</button>
                </div>

                <div class="feature-grid">
                    <div class="feature-card" onclick="launch2048()">
                        <h3>ğŸ”¢ 2048</h3>
                        <p>Slide and combine tiles to reach 2048!</p>
                    </div>

                    <div class="feature-card" onclick="launchBattleship()">
                        <h3>âš“ Battleship</h3>
                        <p>Pass-and-play naval combat game</p>
                    </div>

                    <div class="feature-card" onclick="launchConnectFour()">
                        <h3>ğŸ”´ Connect 4</h3>
                        <p>Drop discs and connect four in a row</p>
                    </div>

                    <div class="feature-card" onclick="launchDotsAndBoxes()">
                        <h3>ğŸ“¦ Dots and Boxes</h3>
                        <p>Connect dots to capture boxes</p>
                    </div>

                    <div class="feature-card" onclick="launchGuessWho()">
                        <h3>ğŸ•µï¸ Guess Who</h3>
                        <p>Figure out the mystery person</p>
                    </div>

                    <div class="feature-card" onclick="launchMinesweeper()">
                        <h3>ğŸ’£ Minesweeper</h3>
                        <p>Clear the grid without hitting mines</p>
                    </div>

                    <div class="feature-card" onclick="launchOthello()">
                        <h3>âš« Othello</h3>
                        <p>Flip discs to dominate the board</p>
                    </div>

                    <div class="feature-card" onclick="launchTicTacToe()">
                        <h3>â­• Tic Tac Toe</h3>
                        <p>Classic X's and O's strategy</p>
                    </div>

                    <div class="feature-card" onclick="launchTrash()">
                        <h3>ğŸ—‘ï¸ Trash</h3>
                        <p>Fast-paced card game</p>
                    </div>

                    <div class="feature-card" onclick="launchWar()">
                        <h3>ğŸ´ War</h3>
                        <p>Classic card battle - highest card wins!</p>
                    </div>
                </div>
            </div>

            <!-- Other Games Menu Section (hidden by default) -->
            <div id="otherMenu" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2 style="color: #a5b4fc;">ğŸ² Other Games</h2>
                    <button onclick="showHome()" class="game-back-btn">â† Back</button>
                </div>

                <div class="feature-grid">
                    <div class="feature-card" onclick="launchDrugWars()">
                        <h3>ğŸ’Š Drug Wars</h3>
                        <p>Classic 1984 economic strategy game!</p>
                    </div>

                    <div class="feature-card" onclick="launchWouldYouRather()">
                        <h3>ğŸ¤” Would You Rather</h3>
                        <p>Funny and tough choices</p>
                    </div>
                </div>
            </div>

            <!-- Word Games Menu Section (hidden by default) -->
            <div id="wordGamesMenu" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2 style="color: #a5b4fc;">ğŸ“ Word Games</h2>
                    <button onclick="showHome()" class="game-back-btn">â† Back</button>
                </div>

                <div class="feature-grid">
                    <div class="feature-card" onclick="launchAnagrams()">
                        <h3>ğŸ”€ Anagrams</h3>
                        <p>Make words from scrambled letters</p>
                    </div>

                    <div class="feature-card" onclick="launchBoggle()">
                        <h3>ğŸ”¤ Boggle</h3>
                        <p>Find words in a grid of letters</p>
                    </div>

                    <div class="feature-card" onclick="launchConnections()">
                        <h3>ğŸ”— Connections</h3>
                        <p>Group 16 words into 4 categories</p>
                    </div>

                    <div class="feature-card" onclick="launchCrossword()">
                        <h3>ğŸ“° Crossword</h3>
                        <p>Classic crossword puzzles</p>
                    </div>

                    <div class="feature-card" onclick="launchCryptogram()">
                        <h3>ğŸ” Cryptogram</h3>
                        <p>Decode encrypted quotes</p>
                    </div>

                    <div class="feature-card" onclick="launchGhost()">
                        <h3>ğŸ‘» Ghost</h3>
                        <p>Add letters, don't complete the word!</p>
                    </div>

                    <div class="feature-card" onclick="launchHangman()">
                        <h3>ğŸª¢ Hangman</h3>
                        <p>Classic word guessing game</p>
                    </div>

                    <div class="feature-card" onclick="launchLetterBoxed()">
                        <h3>ğŸ“¦ Letter Boxed</h3>
                        <p>NYT-style letter square puzzle</p>
                    </div>

                    <div class="feature-card" onclick="launchScattergories()">
                        <h3>ğŸ² Scattergories</h3>
                        <p>Name things starting with a letter</p>
                    </div>

                    <div class="feature-card" onclick="launchSpellingBee()">
                        <h3>ğŸ Spelling Bee</h3>
                        <p>Make words from 7 letters</p>
                    </div>

                    <div class="feature-card" onclick="launchTextTwist()">
                        <h3>ğŸŒ€ Text Twist</h3>
                        <p>Find the big word to advance!</p>
                    </div>

                    <div class="feature-card" onclick="launchWordLadder()">
                        <h3>ğŸªœ Word Ladder</h3>
                        <p>Transform words one letter at a time</p>
                    </div>

                    <div class="feature-card" onclick="launchWordle()">
                        <h3>ğŸŸ© Wordle</h3>
                        <p>Guess the 5-letter word in 6 tries!</p>
                    </div>
                </div>
            </div>

            <!-- Pac-Man Game Section (hidden by default) -->
            <div id="pacmanGame" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <button onclick="exitPacman()" class="game-back-btn">â† Back</button>
                    <h2 style="margin: 0;">ğŸŸ¡ Pac-Man</h2>
                    <div style="width: 120px;"></div>
                </div>
                <div style="text-align: center;">
                    <canvas id="pacmanCanvas"></canvas>
                </div>

                <!-- Mobile Touch Controls - Standardized Layout -->
                <div id="pacmanControls" style="display: flex; justify-content: flex-end; align-items: center; margin-top: 2rem; padding: 0 1rem;">
                    <div style="display: grid; grid-template-columns: repeat(3, 80px); grid-template-rows: repeat(3, 80px); gap: 8px;">
                        <div style="grid-column: 2;"></div>
                        <button id="btnUp" style="grid-column: 2; width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">â–²</button>
                        <div></div>

                        <button id="btnLeft" style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">â—€</button>
                        <div></div>
                        <button id="btnRight" style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">â–¶</button>

                        <div></div>
                        <button id="btnDown" style="grid-column: 2; width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">â–¼</button>
                        <div></div>
                    </div>
                </div>
            </div>

            <!-- Battleship Game Section (hidden by default) -->
            <div id="battleshipGame" style="display: none;">
                <div id="battleshipContent"></div>
            </div>

            <div id="connect4Game" style="display: none;">
                <div id="connect4Content"></div>
            </div>

            <div id="minesweeperGame" style="display: none; margin: -2rem; padding: 0.5rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem; flex-wrap: wrap; gap: 0.5rem;">
                    <button onclick="exitMinesweeper()" class="game-back-btn">â† Back</button>
                    <h2 style="margin: 0;">ğŸ’£ Minesweeper</h2>
                    <div style="width: 100px;"></div>
                </div>
                <div id="minesweeperContent"></div>
            </div>

            <div id="warGame" style="display: none;">
                <div id="warContent"></div>
            </div>

            <!-- Trash Game Section (hidden by default) -->
            <div id="trashGame" style="display: none;">
                <div id="trashContent"></div>
            </div>

            <!-- Othello Game Section (hidden by default) -->
            <div id="othelloGame" style="display: none;">
                <div id="othelloContent"></div>
            </div>

            <!-- Would You Rather Game Section (hidden by default) -->
            <div id="wouldYouRatherGame" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <button onclick="exitWouldYouRatherToMenu()" class="game-back-btn">â† Back</button>
                    <h2 style="margin: 0;">ğŸ¤” Would You Rather</h2>
                    <div style="width: 120px;"></div>
                </div>
                <div id="wouldYouRatherContent"></div>
            </div>

            <!-- Dots and Boxes Game Section (hidden by default) -->
            <div id="dotsAndBoxesGame" style="display: none;">
                <div id="dotsAndBoxesContent"></div>
            </div>

            <!-- Tic Tac Toe Game Section (hidden by default) -->
            <div id="tictactoeGame" style="display: none;">
                <div id="tictactoeContent"></div>
            </div>

            <!-- Word Ladder Game Section (hidden by default) -->
            <div id="wordLadderGame" style="display: none;">
                <div id="wordLadderContent"></div>
            </div>

            <!-- Spelling Bee Game Section (hidden by default) -->
            <div id="spellingBeeGame" style="display: none;">
                <div id="spellingBeeContent"></div>
            </div>

            <!-- Ghost Game Section (hidden by default) -->
            <div id="ghostGame" style="display: none;">
                <div id="ghostContent"></div>
            </div>

            <!-- Wordle Game Section (hidden by default) -->
            <div id="wordleGame" style="display: none;">
                <div id="wordleContent"></div>
            </div>

            <!-- Scattergories Game Section (hidden by default) -->
            <div id="scattergoriesGame" style="display: none;">
                <div id="scattergoriesContent"></div>
            </div>

            <!-- Boggle Game Section (hidden by default) -->
            <div id="boggleGame" style="display: none;">
                <div id="boggleContent"></div>
            </div>

            <!-- Anagrams Game Section (hidden by default) -->
            <div id="anagramsGame" style="display: none;">
                <div id="anagramsContent"></div>
            </div>

            <!-- Connections Game Section (hidden by default) -->
            <div id="connectionsGame" style="display: none;">
                <div id="connections-container"></div>
            </div>

            <!-- Hangman Game Section (hidden by default) -->
            <div id="hangmanGame" style="display: none;">
                <div id="hangman-container"></div>
            </div>

            <!-- Letter Boxed Game Section (hidden by default) -->
            <div id="letterBoxedGame" style="display: none;">
                <div id="letterboxed-container"></div>
            </div>

            <!-- Crossword Game Section (hidden by default) -->
            <div id="crosswordGame" style="display: none;">
                <div id="crossword-container"></div>
            </div>

            <!-- Cryptogram Game Section (hidden by default) -->
            <div id="cryptogramGame" style="display: none;">
                <div id="cryptogram-container"></div>
            </div>

            <!-- Text Twist Game Section (hidden by default) -->
            <div id="textTwistGame" style="display: none;">
                <div id="texttwist-container"></div>
            </div>

            <!-- Guess Who Game Section (hidden by default) -->
            <div id="guessWhoGame" style="display: none;">
                <div id="guessWhoContent"></div>
            </div>

            <!-- Joust Game Section (hidden by default) -->
            <div id="joustGame" style="display: none;">
                <div id="joustContent"></div>
            </div>

            <!-- Tunnel Runner Game Section (hidden by default) -->
            <div id="tunnelRunnerGame" style="display: none; position: relative; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%); border-radius: 1rem; padding: 1rem; min-height: 500px;">
                <button onclick="exitTunnelRunnerToMenu()" style="position: absolute; top: 0.75rem; left: 0.75rem; background: rgba(75, 85, 99, 0.8); color: white; border: none; padding: 0.5rem 1rem; border-radius: 0.5rem; cursor: pointer; font-size: 0.9rem; z-index: 100;">â† Back</button>
                <div id="tunnelRunnerContent"></div>
            </div>

            <!-- Downhill Skier Game Section (hidden by default) -->
            <div id="downhillSkierGame" style="display: none;">
                <div style="background: linear-gradient(135deg, #0c1929 0%, #1a3a5c 50%, #0d2137 100%); min-height: 100%; padding: 1rem; border-radius: 12px; position: relative;">
                    <!-- Back Button -->
                    <button onclick="exitDownhillSkierToMenu()" style="position: absolute; top: 0.75rem; left: 0.75rem; background: rgba(75, 85, 99, 0.8); color: white; border: none; padding: 0.5rem 0.75rem; border-radius: 8px; font-size: 0.85rem; cursor: pointer; z-index: 10;">â† Back</button>

                    <!-- Title -->
                    <div style="text-align: center; padding-top: 0.5rem; margin-bottom: 1rem;">
                        <h1 style="font-size: 1.8rem; color: #67e8f9; text-shadow: 0 0 20px rgba(103, 232, 249, 0.5); margin: 0;">â›·ï¸ Downhill Skier</h1>
                        <p style="color: #888; font-size: 0.8rem; margin-top: 0.25rem;">Alpine Adventure</p>
                    </div>

                    <div id="downhillSkierContent"></div>
                </div>
            </div>

            <!-- Galaxian Game Section (hidden by default) -->
            <div id="galaxianGame" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <button onclick="exitGalaxian()" class="game-back-btn">â† Back</button>
                    <h2 style="margin: 0;">ğŸš€ Galaxian</h2>
                    <div style="width: 120px;"></div>
                </div>
                <div style="text-align: center; max-width: 100%; overflow: hidden;">
                    <canvas id="galaxianCanvas" style="max-width: 100%; height: auto; display: block; margin: 0 auto;"></canvas>
                    <div style="margin-top: 1rem; color: #94a3b8; font-size: 0.9rem;">
                        <p><strong>Arrow Keys / A-D</strong> to move | <strong>Space</strong> to shoot</p>
                        <p style="margin-top: 0.5rem;">ğŸ’¡ Diving enemies are worth 2x points!</p>
                    </div>
                </div>

                <!-- Mobile Touch Controls - Standardized Layout -->
                <div id="galaxianControls" style="display: flex; justify-content: space-between; align-items: flex-end; margin-top: 2rem; padding: 0 1rem;">
                    <button id="galaxianBtnFire" style="width: 90px; height: 90px; background: linear-gradient(135deg, #c4b5fd 0%, #a78bfa 100%); color: white; border: none; border-radius: 50%; font-size: 1.2rem; cursor: pointer; touch-action: manipulation; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">FIRE</button>
                    <div style="display: flex; gap: 0.5rem;">
                        <button id="galaxianBtnLeft" style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">â—€</button>
                        <button id="galaxianBtnRight" style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">â–¶</button>
                    </div>
                </div>
            </div>

            <!-- Galaga Game Section (hidden by default) -->
            <div id="galagaGame" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <button onclick="exitGalaga()" class="game-back-btn">â† Back</button>
                    <h2 style="margin: 0;">ğŸ‘¾ Galaga</h2>
                    <div style="width: 120px;"></div>
                </div>
                <div style="text-align: center; max-width: 100%; overflow: hidden;">
                    <canvas id="galagaCanvas" style="max-width: 100%; height: auto; display: block; margin: 0 auto;"></canvas>
                    <div style="margin-top: 1rem; color: #94a3b8; font-size: 0.9rem;">
                        <p><strong>Arrow Keys / A-D</strong> to move | <strong>Space</strong> to shoot (auto-fire!)</p>
                        <p style="margin-top: 0.5rem;">âœ¨ <strong>Boss Galaga</strong> can capture your ship - rescue it for <strong>Dual Fighter</strong> mode!</p>
                        <p style="margin-top: 0.25rem;">ğŸ¯ Every 3rd stage is a <strong>Challenge Stage</strong></p>
                    </div>
                </div>

                <!-- Mobile Touch Controls - Standardized Layout -->
                <div id="galagaControls" style="display: flex; justify-content: space-between; align-items: flex-end; margin-top: 2rem; padding: 0 1rem;">
                    <button id="galagaBtnFire" style="width: 90px; height: 90px; background: linear-gradient(135deg, #c4b5fd 0%, #a78bfa 100%); color: white; border: none; border-radius: 50%; font-size: 1.2rem; cursor: pointer; touch-action: manipulation; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">FIRE</button>
                    <div style="display: flex; gap: 0.5rem;">
                        <button id="galagaBtnLeft" style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">â—€</button>
                        <button id="galagaBtnRight" style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">â–¶</button>
                    </div>
                </div>
            </div>

            <!-- Centipede Game Section (hidden by default) -->
            <div id="centipedeGame" style="display: none;">
                <div id="centipedeContent"></div>
            </div>

            <!-- Asteroids Game Section (hidden by default) -->
            <div id="asteroidsGame" style="display: none;">
                <div id="asteroidsContent"></div>
            </div>

            <!-- Qix Game Section (hidden by default) -->
            <div id="qixGame" style="display: none;">
                <div id="qixContent"></div>
            </div>

            <!-- Drug Wars Game Section (hidden by default) -->
            <div id="drugwarsGame" style="display: none;">
                <div style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%); min-height: 100%; padding: 1rem; border-radius: 12px; position: relative;">
                    <!-- Back Button -->
                    <button onclick="exitDrugWars()" style="position: absolute; top: 0.75rem; left: 0.75rem; background: rgba(75, 85, 99, 0.8); color: white; border: none; padding: 0.5rem 0.75rem; border-radius: 8px; font-size: 0.85rem; cursor: pointer; z-index: 10;">â† Back</button>

                    <!-- Title -->
                    <div style="text-align: center; padding-top: 0.5rem; margin-bottom: 1rem;">
                        <h1 style="font-size: 1.8rem; color: #a855f7; text-shadow: 0 0 20px rgba(168, 85, 247, 0.5); margin: 0;">ğŸ’Š Drug Wars</h1>
                        <p style="color: #888; font-size: 0.8rem; margin-top: 0.25rem;">NYC 1984</p>
                    </div>

                    <!-- Stats Grid -->
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; margin-bottom: 1rem;">
                        <div style="background: rgba(255,255,255,0.1); padding: 0.5rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 0.65rem; color: #888; text-transform: uppercase;">Day</div>
                            <div style="font-size: 1.1rem; font-weight: bold; color: #60a5fa;"><span id="drugwarsDay">1</span>/<span id="drugwarsTotalDays">30</span></div>
                        </div>
                        <div style="background: rgba(255,255,255,0.1); padding: 0.5rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 0.65rem; color: #888; text-transform: uppercase;">Location</div>
                            <div id="drugwarsLocation" style="font-size: 1rem; font-weight: bold; color: #fbbf24;">Bronx</div>
                        </div>
                        <div style="background: rgba(255,255,255,0.1); padding: 0.5rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 0.65rem; color: #888; text-transform: uppercase;">Health</div>
                            <div style="font-size: 1.1rem; font-weight: bold; color: #f87171;"><span id="drugwarsHealth">100</span>%</div>
                        </div>
                    </div>

                    <!-- Financial Stats -->
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem; margin-bottom: 1rem;">
                        <div style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(34, 197, 94, 0.1)); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">
                            <div style="font-size: 0.7rem; color: #4ade80; text-transform: uppercase;">Cash</div>
                            <div style="font-size: 1.3rem; font-weight: bold; color: #4ade80; text-shadow: 0 0 10px rgba(74, 222, 128, 0.5);">$<span id="drugwarsCash">2,000</span></div>
                        </div>
                        <div style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.1)); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(239, 68, 68, 0.3);">
                            <div style="font-size: 0.7rem; color: #f87171; text-transform: uppercase;">Debt</div>
                            <div style="font-size: 1.3rem; font-weight: bold; color: #f87171; text-shadow: 0 0 10px rgba(248, 113, 113, 0.5);">$<span id="drugwarsDebt">5,500</span></div>
                        </div>
                        <div style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(59, 130, 246, 0.1)); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(59, 130, 246, 0.3);">
                            <div style="font-size: 0.7rem; color: #60a5fa; text-transform: uppercase;">Bank</div>
                            <div style="font-size: 1.3rem; font-weight: bold; color: #60a5fa;">$<span id="drugwarsBank">0</span></div>
                        </div>
                        <div style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(168, 85, 247, 0.1)); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(168, 85, 247, 0.3);">
                            <div style="font-size: 0.7rem; color: #c084fc; text-transform: uppercase;">Net Worth</div>
                            <div id="drugwarsNetWorth" style="font-size: 1.3rem; font-weight: bold; color: #f87171; text-shadow: 0 0 10px rgba(248, 113, 113, 0.5);">-$3,500</div>
                        </div>
                    </div>

                    <!-- Inventory Stats -->
                    <div style="display: flex; justify-content: center; gap: 1.5rem; margin-bottom: 1rem; color: #ccc; font-size: 0.85rem;">
                        <div>ğŸ’ <span id="drugwarsSpace">0/100</span></div>
                        <div>ğŸ”« <span id="drugwarsGuns">0</span></div>
                    </div>

                    <!-- Message Area -->
                    <div id="drugwarsMessage" style="background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(251, 191, 36, 0.1)); padding: 0.75rem; margin-bottom: 1rem; display: none; border-radius: 8px; border-left: 4px solid #fbbf24; color: #fcd34d; font-size: 0.9rem;"></div>

                    <!-- Bronx Actions -->
                    <div id="drugwarsBronxActions" style="background: linear-gradient(135deg, rgba(34, 211, 238, 0.2), rgba(34, 211, 238, 0.1)); padding: 0.75rem; margin-bottom: 1rem; display: none; border-radius: 8px; border: 1px solid rgba(34, 211, 238, 0.3); text-align: center;">
                        <span style="color: #22d3ee; font-weight: bold;">ğŸ¦ Bronx Services:</span>
                        <button onclick="drugWarsBank(); return false;" style="background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; margin-left: 0.75rem; font-size: 0.85rem;">ğŸ’° Bank</button>
                        <button onclick="drugWarsLoan(); return false;" style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; margin-left: 0.5rem; font-size: 0.85rem;">ğŸ¦ˆ Loan Shark</button>
                    </div>

                    <!-- Market Prices -->
                    <div style="background: rgba(255,255,255,0.05); padding: 1rem; margin-bottom: 1rem; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);">
                        <div style="color: #c084fc; font-weight: bold; margin-bottom: 0.75rem; font-size: 1rem;">ğŸ“ˆ Market Prices</div>
                        <table id="drugwarsPrices" style="width: 100%; font-family: monospace; font-size: 0.85rem; color: #e5e5e5;">
                        </table>
                    </div>

                    <!-- Travel -->
                    <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);">
                        <div style="color: #60a5fa; font-weight: bold; margin-bottom: 0.75rem; font-size: 1rem;">ğŸš‡ Travel to:</div>
                        <div id="drugwarsLocations" style="display: flex; flex-wrap: wrap; gap: 0.5rem; justify-content: center;">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Breakout Game Section (hidden by default) -->
            <div id="breakoutGame" style="display: none;">
                <div style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%); min-height: 100%; padding: 1rem; border-radius: 12px; position: relative;">
                    <!-- Back Button -->
                    <button onclick="exitBreakout()" style="position: absolute; top: 0.75rem; left: 0.75rem; background: rgba(75, 85, 99, 0.8); color: white; border: none; padding: 0.5rem 0.75rem; border-radius: 8px; font-size: 0.85rem; cursor: pointer; z-index: 10;">â† Back</button>

                    <!-- Title and Pause -->
                    <div style="text-align: center; padding-top: 0.5rem; margin-bottom: 1rem;">
                        <h1 style="font-size: 1.8rem; color: #f39c12; text-shadow: 0 0 20px rgba(243, 156, 18, 0.5); margin: 0;">ğŸ§± Breakout</h1>
                        <button onclick="breakoutPause()" style="background: linear-gradient(145deg, #3b82f6, #2563eb); color: white; border: none; padding: 0.4rem 0.8rem; border-radius: 8px; cursor: pointer; margin-top: 0.5rem; font-size: 0.8rem;">â¸ï¸ Pause (P)</button>
                    </div>

                    <!-- Status Bar -->
                    <div style="display: flex; justify-content: center; gap: 1rem; margin-bottom: 1rem;">
                        <div style="background: rgba(255,255,255,0.1); padding: 0.5rem 1rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 0.7rem; color: #888;">SCORE</div>
                            <div id="breakoutScore" style="font-size: 1.3rem; font-weight: bold; color: #4ade80;">0</div>
                        </div>
                        <div style="background: rgba(255,255,255,0.1); padding: 0.5rem 1rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 0.7rem; color: #888;">LIVES</div>
                            <div id="breakoutLives" style="font-size: 1.3rem; font-weight: bold; color: #f87171;">3</div>
                        </div>
                        <div style="background: rgba(255,255,255,0.1); padding: 0.5rem 1rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 0.7rem; color: #888;">LEVEL</div>
                            <div id="breakoutLevel" style="font-size: 1.3rem; font-weight: bold; color: #60a5fa;">1</div>
                        </div>
                    </div>

                    <!-- Message Area -->
                    <div id="breakoutMessage" style="background: linear-gradient(135deg, rgba(251, 191, 36, 0.3), rgba(245, 158, 11, 0.2)); padding: 0.75rem; margin-bottom: 1rem; display: none; border: 1px solid rgba(251, 191, 36, 0.4); border-radius: 8px; text-align: center; font-weight: bold; color: #fde68a;"></div>

                    <!-- Game Canvas -->
                    <div style="display: flex; justify-content: center; margin-bottom: 1rem;">
                        <canvas id="breakoutCanvas" width="800" height="600" style="border: 3px solid #f39c12; border-radius: 8px; background: #0a0a15; max-width: 100%; height: auto; box-shadow: 0 0 30px rgba(243, 156, 18, 0.3);"></canvas>
                    </div>

                    <!-- Instructions -->
                    <div style="background: rgba(255,255,255,0.05); padding: 0.75rem; border-radius: 8px; font-size: 0.8rem; color: #9ca3af; border: 1px solid rgba(255,255,255,0.1);">
                        <strong style="color: #d1d5db;">Controls:</strong> Arrow keys / Mouse / Touch buttons to move | Space / Click to launch | P to pause
                    </div>

                    <!-- Mobile Touch Controls -->
                    <div id="breakoutControls" style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem; padding: 0 1rem;">
                        <button id="breakoutBtnLaunch" style="width: 80px; height: 80px; background: linear-gradient(145deg, #f39c12, #d97706); color: white; border: none; border-radius: 50%; font-size: 0.8rem; cursor: pointer; touch-action: manipulation; font-weight: bold; box-shadow: 0 0 20px rgba(243, 156, 18, 0.4);">LAUNCH</button>
                        <div style="display: flex; gap: 0.75rem;">
                            <button id="breakoutBtnLeft" style="width: 70px; height: 70px; background: linear-gradient(145deg, #3b82f6, #2563eb); color: white; border: none; border-radius: 15px; font-size: 1.8rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 0 15px rgba(59, 130, 246, 0.4);">â—€</button>
                            <button id="breakoutBtnRight" style="width: 70px; height: 70px; background: linear-gradient(145deg, #3b82f6, #2563eb); color: white; border: none; border-radius: 15px; font-size: 1.8rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 0 15px rgba(59, 130, 246, 0.4);">â–¶</button>
                        </div>
                    </div>
                </div>

                <!-- Game Over Screen -->
                <div id="breakoutGameOverScreen" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); justify-content: center; align-items: center; z-index: 1000;">
                    <div style="background: linear-gradient(145deg, #1a1a2e, #0f0f1e); border: 3px solid #f39c12; padding: 2.5rem; border-radius: 20px; max-width: 400px; text-align: center; box-shadow: 0 0 50px rgba(243, 156, 18, 0.4);">
                        <h2 id="breakoutGameOverTitle" style="margin-top: 0; color: #f39c12; font-size: 2rem; text-shadow: 0 0 20px rgba(243, 156, 18, 0.5);">GAME OVER</h2>
                        <p id="breakoutGameOverMessage" style="font-size: 1rem; margin: 1rem 0; color: #9ca3af;">Better luck next time!</p>
                        <p style="font-size: 1.5rem; margin: 1.5rem 0; color: #4ade80;">Final Score: <strong id="breakoutFinalScore">0</strong></p>
                        <button onclick="breakoutRestart()" style="background: linear-gradient(145deg, #22c55e, #16a34a); color: white; border: none; padding: 0.8rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold; margin: 0.3rem;">ğŸ”„ Play Again</button>
                        <button onclick="exitBreakout()" style="background: linear-gradient(145deg, #4b5563, #374151); color: white; border: none; padding: 0.8rem 1.5rem; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold; margin: 0.3rem;">ğŸ  Menu</button>
                    </div>
                </div>
            </div>

            <!-- Frogger Game Section (hidden by default) -->
            <div id="froggerGame" style="display: none;">
                <div style="margin-bottom: 1rem;">
                    <button onclick="exitFrogger()" class="game-back-btn">â† Back</button>
                </div>

                <!-- Status Bar -->
                <div style="background: rgba(255,255,255,0.05); padding: 0.75rem; margin-bottom: 1rem; font-family: monospace; font-size: 1rem; text-align: center; border-radius: 10px; color: #f1f5f9; border: 1px solid rgba(255,255,255,0.1);">
                    <strong>Score: <span id="froggerScore" style="color: #4ade80;">0</span></strong> |
                    <strong>Lives: <span id="froggerLives" style="color: #f87171;">3</span></strong> |
                    <strong>Level: <span id="froggerLevel" style="color: #60a5fa;">1</span></strong> |
                    <strong>Time: <span id="froggerTime" style="color: #fbbf24;">60</span></strong>
                </div>

                <!-- Game Canvas -->
                <div style="display: flex; justify-content: center; margin-bottom: 1rem;">
                    <canvas id="froggerCanvas" width="650" height="520" style="border: 3px solid #2c3e50; background: #1a1a1a; max-width: 100%; height: auto;"></canvas>
                </div>

                <!-- Instructions -->
                <div style="background: rgba(255,255,255,0.05); padding: 1rem; border: 1px solid rgba(255,255,255,0.1); font-size: 0.9rem; border-radius: 10px; color: #94a3b8;">
                    <strong style="color: #f1f5f9;">How to Play:</strong>
                    <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                        <li>Guide 6 frogs safely to their homes at the top</li>
                        <li><strong>Road:</strong> Dodge cars, trucks, and buses</li>
                        <li><strong>River:</strong> Jump on logs and turtles (don't fall in!)</li>
                        <li>Watch out for diving turtles and crocodile mouths</li>
                        <li>Bonus points for catching flies and lady frogs!</li>
                    </ul>
                    <strong style="color: #f1f5f9;">Controls:</strong> Arrow keys or touch buttons to hop
                </div>

                <!-- Mobile Touch Controls - Directional Pad Layout -->
                <div id="froggerControls" style="display: flex; justify-content: center; margin-top: 2rem; padding: 1rem;">
                    <div style="position: relative; width: 200px; height: 200px;">
                        <!-- Up button -->
                        <button id="froggerBtnUp" style="position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 70px; height: 70px; background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">â–²</button>
                        <!-- Left button -->
                        <button id="froggerBtnLeft" style="position: absolute; top: 50%; left: 0; transform: translateY(-50%); width: 70px; height: 70px; background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">â—€</button>
                        <!-- Right button -->
                        <button id="froggerBtnRight" style="position: absolute; top: 50%; right: 0; transform: translateY(-50%); width: 70px; height: 70px; background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">â–¶</button>
                        <!-- Down button -->
                        <button id="froggerBtnDown" style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 70px; height: 70px; background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%); color: white; border: none; border-radius: 15px; font-size: 2rem; cursor: pointer; touch-action: manipulation; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">â–¼</button>
                    </div>
                </div>

                <!-- Game Over Screen -->
                <div id="froggerGameOverScreen" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); justify-content: center; align-items: center; z-index: 1000;">
                    <div style="background: #1e293b; padding: 3rem; border-radius: 15px; max-width: 500px; text-align: center; border: 1px solid rgba(255,255,255,0.1);">
                        <h2 style="margin-top: 0; color: #f1f5f9;">GAME OVER</h2>
                        <p style="font-size: 1.2rem; margin: 1rem 0; color: #94a3b8;">ğŸ¸ Better luck next time, frogger!</p>
                        <p style="font-size: 2rem; margin: 1.5rem 0; color: #60a5fa;">Final Score: <strong id="froggerFinalScore">0</strong></p>
                        <button onclick="froggerRestart()" style="background: #334155; color: white; border: none; padding: 1rem 2rem; border-radius: 10px; cursor: pointer; font-size: 1.2rem; font-weight: bold; margin-right: 1rem;">ğŸ”„ Play Again</button>
                        <button onclick="exitFrogger()" style="background: #475569; color: white; border: none; padding: 1rem 2rem; border-radius: 10px; cursor: pointer; font-size: 1.2rem; font-weight: bold;">ğŸ  Menu</button>
                    </div>
                </div>
            </div>

            <!-- Caverns of Mars Game Section (hidden by default) -->
            <div id="cavernsOfMarsGame" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; padding: 0 0.5rem;">
                    <button id="cavernsBackBtn" class="game-back-btn">â† Back</button>
                    <h2 style="margin: 0; color: white;">Caverns of Mars</h2>
                    <div style="width: 80px;"></div>
                </div>
                <div style="text-align: center; margin-bottom: 1rem;">
                    <div style="background: rgba(255,107,53,0.15); border-left: 4px solid #60a5fa; padding: 1rem; margin: 0 auto; max-width: 600px; text-align: left; color: #e0e0e0; border-radius: 8px;">
                        <strong style="color: #60a5fa;">Controls:</strong><br>
                        <span style="color: #ccc;"><strong style="color: #fff;">Arrow Keys</strong> or <strong style="color: #fff;">A/D</strong> - Move left/right<br>
                        <strong style="color: #fff;">SPACE</strong> or <strong style="color: #fff;">Click/Tap</strong> - Fire (slows descent but uses fuel!)</span><br><br>
                        <strong style="color: #60a5fa;">Mission:</strong><br>
                        <span style="color: #ccc;">Descend into Mars, shoot yellow fuel tanks to refill, destroy enemies, plant reactor bomb at bottom, then ESCAPE before it explodes!</span>
                    </div>
                </div>
                <div style="text-align: center;">
                    <canvas id="cavernsCanvas" style="max-width: 100%; border: 2px solid #60a5fa; border-radius: 10px;"></canvas>
                </div>
            </div>

            <!-- Snake Game Section (hidden by default) -->
            <div id="snakeGame" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <button onclick="exitSnake()" class="game-back-btn">â† Back</button>
                    <h2 style="margin: 0;">ğŸ Snake</h2>
                    <div style="width: 120px;"></div>
                </div>
                <div id="snakeContent"></div>
            </div>

            <!-- 2048 Game Section (hidden by default) -->
            <div id="game2048" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <button onclick="exit2048()" class="game-back-btn">â† Back</button>
                    <h2 style="margin: 0;">ğŸ”¢ 2048</h2>
                    <div style="width: 120px;"></div>
                </div>
                <div id="game2048Content"></div>
            </div>

        </div>
    </div>

    <!-- Drug Wars Modals (outside app-container to fix fixed positioning) -->
    <div id="drugwarsDaySelectModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); justify-content: center; align-items: center; z-index: 10000;">
        <div style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); padding: 2.5rem; border-radius: 20px; max-width: 400px; text-align: center; margin: 1rem; border: 1px solid rgba(168, 85, 247, 0.3); box-shadow: 0 0 40px rgba(168, 85, 247, 0.2);">
            <h2 style="margin-top: 0; color: #a855f7; text-shadow: 0 0 20px rgba(168, 85, 247, 0.5); font-size: 2rem;">ğŸ’Š Drug Wars</h2>
            <p style="font-size: 1rem; color: #888; margin: 1rem 0;">NYC 1984 - Choose game length:</p>
            <div style="display: flex; flex-direction: column; gap: 0.75rem; margin-top: 1.5rem;">
                <button onclick="drugWarsStartGame(30)" style="background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; border: none; padding: 1.2rem 2rem; border-radius: 12px; cursor: pointer; font-size: 1.1rem; font-weight: bold; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);">
                    ğŸ“… 30 Days (Quick)
                </button>
                <button onclick="drugWarsStartGame(60)" style="background: linear-gradient(135deg, #a855f7, #9333ea); color: white; border: none; padding: 1.2rem 2rem; border-radius: 12px; cursor: pointer; font-size: 1.1rem; font-weight: bold; box-shadow: 0 4px 15px rgba(168, 85, 247, 0.3);">
                    ğŸ“… 60 Days (Medium)
                </button>
                <button onclick="drugWarsStartGame(90)" style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; border: none; padding: 1.2rem 2rem; border-radius: 12px; cursor: pointer; font-size: 1.1rem; font-weight: bold; box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);">
                    ğŸ“… 90 Days (Long)
                </button>
            </div>
            <button onclick="document.getElementById('drugwarsDaySelectModal').style.display='none'; document.getElementById('gamesMenu').style.display='block';" style="background: rgba(255,255,255,0.1); color: #888; border: 1px solid rgba(255,255,255,0.2); padding: 0.6rem 1.5rem; border-radius: 8px; cursor: pointer; font-size: 0.9rem; margin-top: 1.5rem;">â† Back</button>
        </div>
    </div>

    <div id="drugwarsPoliceModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); justify-content: center; align-items: center; z-index: 10000;">
        <div style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); padding: 2rem; border-radius: 20px; max-width: 400px; text-align: center; margin: 1rem; border: 1px solid rgba(239, 68, 68, 0.3); box-shadow: 0 0 40px rgba(239, 68, 68, 0.2); animation: pulse 1s infinite;">
            <h2 style="margin-top: 0; color: #f87171; text-shadow: 0 0 20px rgba(248, 113, 113, 0.5); font-size: 1.8rem;">ğŸš“ Officer Hardass!</h2>
            <p style="font-size: 1.1rem; margin: 1.5rem 0; color: #e5e5e5;">You've been spotted!</p>
            <div style="display: flex; gap: 1rem; justify-content: center;">
                <button id="drugwarsPoliceRun" style="background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #1a1a2e; border: none; padding: 1rem 2rem; border-radius: 12px; cursor: pointer; font-size: 1rem; font-weight: bold; box-shadow: 0 4px 15px rgba(251, 191, 36, 0.3);">ğŸƒ Run</button>
                <button id="drugwarsPoliceFight" style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; cursor: pointer; font-size: 1rem; font-weight: bold; box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);">âš”ï¸ Fight</button>
            </div>
        </div>
    </div>

    <div id="drugwarsGameOverScreen" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); justify-content: center; align-items: center; z-index: 10000;">
        <div style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); padding: 2.5rem; border-radius: 20px; max-width: 450px; text-align: center; margin: 1rem; border: 1px solid rgba(168, 85, 247, 0.3); box-shadow: 0 0 40px rgba(168, 85, 247, 0.2);">
            <h2 style="margin-top: 0; color: #a855f7; text-shadow: 0 0 20px rgba(168, 85, 247, 0.5); font-size: 2rem;">ğŸ® GAME OVER</h2>
            <p style="font-size: 1.2rem; margin: 1.5rem 0; color: #e5e5e5;">Check your final score!</p>
            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                <button onclick="drugWarsRestart()" style="background: linear-gradient(135deg, #22c55e, #16a34a); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; cursor: pointer; font-size: 1.1rem; font-weight: bold; box-shadow: 0 4px 15px rgba(34, 197, 94, 0.3);">ğŸ”„ Play Again</button>
                <button onclick="exitDrugWars()" style="background: rgba(255,255,255,0.1); color: #e5e5e5; border: 1px solid rgba(255,255,255,0.2); padding: 1rem 2rem; border-radius: 12px; cursor: pointer; font-size: 1.1rem; font-weight: bold;">ğŸ  Menu</button>
            </div>
        </div>
    </div>

    <div id="drugwarsNumberInput" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); justify-content: center; align-items: center; z-index: 10001;">
        <div style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); padding: 2rem; border-radius: 15px; max-width: 400px; width: 90%; margin: 1rem; border: 1px solid rgba(59, 130, 246, 0.3); box-shadow: 0 0 40px rgba(59, 130, 246, 0.2);">
            <h3 id="drugwarsNumberInputPrompt" style="margin-top: 0; color: #60a5fa; font-size: 1.1rem;">Enter amount:</h3>
            <input type="number" id="drugwarsNumberInputField" inputmode="numeric" pattern="[0-9]*" style="width: 100%; padding: 1rem; font-size: 1.5rem; border: 2px solid rgba(59, 130, 246, 0.5); border-radius: 10px; text-align: center; box-sizing: border-box; background: rgba(0,0,0,0.3); color: #4ade80; font-weight: bold;" />
            <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                <button id="drugwarsNumberInputCancel" style="flex: 1; background: rgba(255,255,255,0.1); color: #888; border: 1px solid rgba(255,255,255,0.2); padding: 1rem; border-radius: 10px; cursor: pointer; font-size: 1rem;">Cancel</button>
                <button id="drugwarsNumberInputOK" style="flex: 1; background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; border: none; padding: 1rem; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: bold;">OK</button>
            </div>
        </div>
    </div>

    <script>
        // License plate data with abbreviations
        const US_STATES = [
            { name: 'Alabama', abbr: 'AL' },
            { name: 'Alaska', abbr: 'AK' },
            { name: 'Arizona', abbr: 'AZ' },
            { name: 'Arkansas', abbr: 'AR' },
            { name: 'California', abbr: 'CA' },
            { name: 'Colorado', abbr: 'CO' },
            { name: 'Connecticut', abbr: 'CT' },
            { name: 'Delaware', abbr: 'DE' },
            { name: 'District of Columbia', abbr: 'DC' },
            { name: 'Florida', abbr: 'FL' },
            { name: 'Georgia', abbr: 'GA' },
            { name: 'Hawaii', abbr: 'HI' },
            { name: 'Idaho', abbr: 'ID' },
            { name: 'Illinois', abbr: 'IL' },
            { name: 'Indiana', abbr: 'IN' },
            { name: 'Iowa', abbr: 'IA' },
            { name: 'Kansas', abbr: 'KS' },
            { name: 'Kentucky', abbr: 'KY' },
            { name: 'Louisiana', abbr: 'LA' },
            { name: 'Maine', abbr: 'ME' },
            { name: 'Maryland', abbr: 'MD' },
            { name: 'Massachusetts', abbr: 'MA' },
            { name: 'Michigan', abbr: 'MI' },
            { name: 'Minnesota', abbr: 'MN' },
            { name: 'Mississippi', abbr: 'MS' },
            { name: 'Missouri', abbr: 'MO' },
            { name: 'Montana', abbr: 'MT' },
            { name: 'Nebraska', abbr: 'NE' },
            { name: 'Nevada', abbr: 'NV' },
            { name: 'New Hampshire', abbr: 'NH' },
            { name: 'New Jersey', abbr: 'NJ' },
            { name: 'New Mexico', abbr: 'NM' },
            { name: 'New York', abbr: 'NY' },
            { name: 'North Carolina', abbr: 'NC' },
            { name: 'North Dakota', abbr: 'ND' },
            { name: 'Ohio', abbr: 'OH' },
            { name: 'Oklahoma', abbr: 'OK' },
            { name: 'Oregon', abbr: 'OR' },
            { name: 'Pennsylvania', abbr: 'PA' },
            { name: 'Rhode Island', abbr: 'RI' },
            { name: 'South Carolina', abbr: 'SC' },
            { name: 'South Dakota', abbr: 'SD' },
            { name: 'Tennessee', abbr: 'TN' },
            { name: 'Texas', abbr: 'TX' },
            { name: 'Utah', abbr: 'UT' },
            { name: 'Vermont', abbr: 'VT' },
            { name: 'Virginia', abbr: 'VA' },
            { name: 'Washington', abbr: 'WA' },
            { name: 'West Virginia', abbr: 'WV' },
            { name: 'Wisconsin', abbr: 'WI' },
            { name: 'Wyoming', abbr: 'WY' }
        ];

        const CANADA_PROVINCES = [
            { name: 'Alberta', abbr: 'AB' },
            { name: 'British Columbia', abbr: 'BC' },
            { name: 'Manitoba', abbr: 'MB' },
            { name: 'New Brunswick', abbr: 'NB' },
            { name: 'Newfoundland and Labrador', abbr: 'NL' },
            { name: 'Northwest Territories', abbr: 'NT' },
            { name: 'Nova Scotia', abbr: 'NS' },
            { name: 'Nunavut', abbr: 'NU' },
            { name: 'Ontario', abbr: 'ON' },
            { name: 'Prince Edward Island', abbr: 'PE' },
            { name: 'Quebec', abbr: 'QC' },
            { name: 'Saskatchewan', abbr: 'SK' },
            { name: 'Yukon', abbr: 'YT' }
        ];

        // Generate license plate SVG
        function createPlateSVG(abbr, isChecked) {
            return `
                <svg width="100" height="50" viewBox="0 0 100 50" style="border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">
                    <rect width="100" height="50" rx="4" fill="${isChecked ? '#28a745' : '#4a90e2'}"/>
                    <rect x="2" y="2" width="96" height="46" rx="3" fill="white"/>
                    <text x="50" y="32" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="${isChecked ? '#28a745' : '#333'}">${abbr}</text>
                </svg>
            `;
        }

        // Load saved progress from localStorage
        let collectedPlates = JSON.parse(localStorage.getItem('collectedPlates') || '{}');

        function hideAllMenus() {
            document.getElementById('arcadeMenu').style.display = 'none';
            document.getElementById('strategyMenu').style.display = 'none';
            document.getElementById('otherMenu').style.display = 'none';
            document.getElementById('wordGamesMenu').style.display = 'none';
        }

        function showHome() {
            document.querySelector('.welcome').style.display = 'block';
            document.querySelector('.feature-grid').style.display = 'grid';
            document.getElementById('plateTracker').style.display = 'none';
            document.getElementById('travelBingo').style.display = 'none';
            hideAllMenus();
        }

        function showArcadeMenu() {
            document.querySelector('.welcome').style.display = 'none';
            document.querySelector('.feature-grid').style.display = 'none';
            document.getElementById('plateTracker').style.display = 'none';
            hideAllMenus();
            document.getElementById('arcadeMenu').style.display = 'block';
        }

        function showStrategyMenu() {
            document.querySelector('.welcome').style.display = 'none';
            document.querySelector('.feature-grid').style.display = 'none';
            document.getElementById('plateTracker').style.display = 'none';
            hideAllMenus();
            document.getElementById('strategyMenu').style.display = 'block';
        }

        function showOtherMenu() {
            document.querySelector('.welcome').style.display = 'none';
            document.querySelector('.feature-grid').style.display = 'none';
            document.getElementById('plateTracker').style.display = 'none';
            hideAllMenus();
            document.getElementById('otherMenu').style.display = 'block';
        }

        function showWordGamesMenu() {
            document.querySelector('.welcome').style.display = 'none';
            document.querySelector('.feature-grid').style.display = 'none';
            document.getElementById('plateTracker').style.display = 'none';
            hideAllMenus();
            document.getElementById('wordGamesMenu').style.display = 'block';
        }

        function showLicensePlateTracker() {
            document.querySelector('.welcome').style.display = 'none';
            document.querySelector('.feature-grid').style.display = 'none';
            document.getElementById('plateTracker').style.display = 'block';
            loadPlateTracker();
        }

        function loadPlateTracker() {
            // Render US States
            const usContainer = document.getElementById('usStates');
            usContainer.innerHTML = US_STATES.map(state => {
                const isChecked = collectedPlates[state.name] || false;
                return `
                    <label style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: ${isChecked ? '#d4edda' : 'white'}; margin-bottom: 0.75rem; border-radius: 10px; cursor: pointer; border: 2px solid ${isChecked ? '#28a745' : '#e9ecef'}; transition: all 0.2s;">
                        <input type="checkbox" ${isChecked ? 'checked' : ''} onchange="togglePlate('${state.name}')" style="width: 24px; height: 24px; cursor: pointer;">
                        <div style="flex-shrink: 0;">
                            ${createPlateSVG(state.abbr, isChecked)}
                        </div>
                        <span style="font-size: 1.1rem; font-weight: ${isChecked ? 'bold' : 'normal'}; color: ${isChecked ? '#155724' : '#333'};">${state.name}</span>
                        ${isChecked ? '<span style="margin-left: auto; color: #28a745; font-size: 1.5rem;">âœ“</span>' : ''}
                    </label>
                `;
            }).join('');

            // Render Canadian Provinces
            const canadaContainer = document.getElementById('canadaProvinces');
            canadaContainer.innerHTML = CANADA_PROVINCES.map(province => {
                const isChecked = collectedPlates[province.name] || false;
                return `
                    <label style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: ${isChecked ? '#d4edda' : 'white'}; margin-bottom: 0.75rem; border-radius: 10px; cursor: pointer; border: 2px solid ${isChecked ? '#28a745' : '#e9ecef'}; transition: all 0.2s;">
                        <input type="checkbox" ${isChecked ? 'checked' : ''} onchange="togglePlate('${province.name}')" style="width: 24px; height: 24px; cursor: pointer;">
                        <div style="flex-shrink: 0;">
                            ${createPlateSVG(province.abbr, isChecked)}
                        </div>
                        <span style="font-size: 1.1rem; font-weight: ${isChecked ? 'bold' : 'normal'}; color: ${isChecked ? '#155724' : '#333'};">${province.name}</span>
                        ${isChecked ? '<span style="margin-left: auto; color: #28a745; font-size: 1.5rem;">âœ“</span>' : ''}
                    </label>
                `;
            }).join('');

            updateProgress();
        }

        function togglePlate(name) {
            collectedPlates[name] = !collectedPlates[name];
            if (!collectedPlates[name]) {
                delete collectedPlates[name];
            }
            localStorage.setItem('collectedPlates', JSON.stringify(collectedPlates));
            loadPlateTracker();
        }

        function updateProgress() {
            // Calculate US states collected
            const usCollected = US_STATES.filter(s => collectedPlates[s.name]).length;
            const usTotal = US_STATES.length;

            // Calculate Canada provinces collected
            const canadaCollected = CANADA_PROVINCES.filter(p => collectedPlates[p.name]).length;
            const canadaTotal = CANADA_PROVINCES.length;

            // Calculate total
            const total = usTotal + canadaTotal;
            const collected = usCollected + canadaCollected;
            const percentage = (collected / total * 100).toFixed(1);

            // Update displays
            document.getElementById('plateProgress').textContent = `${collected} / ${total}`;
            document.getElementById('plateProgressBar').style.width = `${percentage}%`;
            document.getElementById('usProgress').textContent = `${usCollected} / ${usTotal}`;
            document.getElementById('canadaProgress').textContent = `${canadaCollected} / ${canadaTotal}`;
        }

        // Travel Bingo functionality
        // Classic/Mixed Theme (Original)
        const BINGO_ITEMS = [
            'ğŸ„ Cow', 'ğŸš° Water Tower', 'ğŸŒ‰ Bridge', 'ğŸª§ Billboard', 'â›½ Gas Station',
            'ğŸï¸ Motorcycle', 'ğŸš› Semi Truck', 'ğŸ›‘ Stop Sign', 'ğŸš” Police Car', 'ğŸŸ¡ Yellow Car',
            'â›ª Church', 'ğŸ  Barn', 'ğŸ—ï¸ Silo', 'ğŸª¦ Cemetery', 'ğŸšŒ School Bus',
            'âš ï¸ Speed Limit Sign', 'ğŸš‚ Train', 'ğŸï¸ Lake/Pond', 'â›°ï¸ Mountains', 'ğŸ¦ Birds on Wire',
            'ğŸ› Playground', 'ğŸ” Fast Food', 'ğŸŒ€ Windmill', 'ğŸ›£ï¸ Exit Sign', 'ğŸšœ Tractor',
            'ğŸª Convenience Store', 'ğŸ¦Œ Deer Crossing Sign', 'ğŸŒ³ Tree Grove', 'ğŸ­ Factory', 'â›² Fountain',
            'ğŸš Helicopter', 'ğŸ« School', 'ğŸ¥ Hospital', 'ğŸ¨ Hotel', 'ğŸŒ» Sunflowers',
            'ğŸ‘ Sheep', 'ğŸ Fruit Stand', 'ğŸ…¿ï¸ Rest Stop', 'ğŸ¦… Flock of Birds', 'ğŸ›» Weigh Station', 'ğŸ“š Library Sign',
            'ğŸš§ Construction Cone', 'ğŸš© Flagpole', 'ğŸŒµ Cactus', 'ğŸš‘ Ambulance', 'ğŸ„ğŸš¸ Cattle Crossing', 'â†©ï¸ Detour Sign',
            'ğŸˆ Hot Air Balloon', 'âš¡ Lightning', 'ğŸŒˆ Rainbow'
        ];

        // City Road Trip Theme
        const BINGO_ITEMS_CITY = [
            'ğŸš¦ Traffic Light', 'ğŸ™ï¸ Skyscraper', 'ğŸš‡ Subway Station', 'ğŸª Convenience Store', 'ğŸšŒ City Bus',
            'ğŸš• Taxi', 'ğŸ¢ Office Building', 'ğŸ¬ Shopping Mall', 'ğŸš” Police Car', 'ğŸš‘ Ambulance',
            'ğŸš’ Fire Truck', 'ğŸ…¿ï¸ Parking Garage', 'ğŸ¨ Hotel', 'ğŸ• Pizza Place', 'â˜• Coffee Shop',
            'ğŸ¦ Bank', 'ğŸ“® Mailbox', 'ğŸš§ Construction Zone', 'ğŸ¥ Hospital', 'ğŸš² Bike Lane',
            'ğŸ›´ Scooter', 'ğŸŒ³ City Park', 'â›² Fountain', 'ğŸ­ Theater', 'ğŸ›ï¸ Museum',
            'ğŸš Bus Stop', 'ğŸ“¡ Cell Tower', 'ğŸª 7-Eleven', 'ğŸ” Fast Food', 'ğŸš Delivery Van',
            'ğŸš“ Police Station', 'ğŸ£ Post Office', 'ğŸ“š Library', 'ğŸª Event Tent', 'ğŸŒ‰ Bridge',
            'ğŸ›£ï¸ Highway Exit', 'ğŸš¥ Pedestrian Signal', 'ğŸ—ï¸ Construction Crane', 'ğŸ—½ Tower/Monument', 'ğŸ¡ City Attraction',
            'ğŸš School Bus', 'ğŸš™ Uber/Lyft', 'ğŸŸï¸ Stadium', 'ğŸŒ† City Skyline', 'ğŸ›’ Shopping Cart',
            'ğŸš¨ Emergency Lights', 'ğŸ“± Phone Store', 'ğŸ¬ Movie Theater', 'ğŸŒ Fog/Smog', 'ğŸŒƒ Night Lights'
        ];

        // Rural Road Trip Theme
        const BINGO_ITEMS_RURAL = [
            'ğŸ„ Cow', 'ğŸ Horse', 'ğŸ‘ Sheep', 'ğŸ“ Chicken', 'ğŸ– Pig',
            'ğŸŒ¾ Wheat Field', 'ğŸŒ½ Corn Field', 'ğŸšœ Tractor', 'ğŸ  Barn', 'ğŸ—ï¸ Silo',
            'ğŸª¦ Cemetery', 'â›ª Country Church', 'ğŸï¸ Lake/Pond', 'ğŸŒ³ Tree Grove', 'ğŸ¦Œ Deer Crossing Sign',
            'ğŸŒ» Sunflowers', 'ğŸ Fruit Stand', 'ğŸ¦ Birds on Wire', 'ğŸŒ€ Windmill', 'â›°ï¸ Mountains',
            'ğŸš§ Gravel Road', 'ğŸ“® Rural Mailbox', 'ğŸŒ² Forest', 'ğŸ¦… Flock of Birds', 'ğŸ„ğŸš¸ Cattle Crossing',
            'ğŸŒ„ Rolling Hills', 'ğŸ¦ƒ Wild Turkey', 'ğŸ¦Š Fox Crossing', 'ğŸŒ¾ Hay Bales', 'ğŸš° Water Tower',
            'ğŸ¡ Farmhouse', 'ğŸªµ Split Rail Fence', 'ğŸŒ¿ Pasture', 'ğŸ¦† Duck Pond', 'ğŸ• Farm Dog',
            'ğŸš› Farm Truck', 'ğŸŒ± Garden', 'ğŸ Beehives', 'ğŸ¦Œ Deer', 'ğŸï¸ Creek/Stream',
            'ğŸª´ Flower Garden', 'ğŸŒ³ Orchard', 'ğŸšª Red Barn Door', 'ğŸ”” Farm Bell', 'ğŸŒ¾ Wheat Silo',
            'ğŸª Open Field', 'ğŸŒ¤ï¸ Clear Sky', 'ğŸŒ… Sunrise/Sunset', 'ğŸ¦‰ Barn Owl', 'ğŸ¿ï¸ Wildlife'
        ];

        // Highway Road Trip Theme
        const BINGO_ITEMS_HIGHWAY = [
            'ğŸš› Semi Truck', 'â›½ Gas Station', 'ğŸ›£ï¸ Exit Sign', 'ğŸ…¿ï¸ Rest Stop', 'ğŸ›» Weigh Station',
            'ğŸª§ Billboard', 'ğŸš” State Trooper', 'ğŸšŒ Tour Bus', 'ğŸï¸ Motorcycle', 'ğŸš RV/Camper',
            'ğŸš™ Minivan', 'ğŸŸ¡ Yellow Car', 'ğŸ”´ Red Car', 'ğŸï¸ Sports Car', 'ğŸš— Convertible',
            'ğŸŒ‰ Bridge/Overpass', 'ğŸš§ Construction Zone', 'â†©ï¸ Detour Sign', 'âš ï¸ Speed Limit Sign', 'ğŸ›‘ Stop Sign',
            'ğŸ¨ Highway Motel', 'ğŸ” Fast Food', 'â˜• Drive-Thru', 'ğŸš Helicopter', 'ğŸ“¡ Cell Tower',
            'ğŸšš Moving Truck', 'ğŸš™ Taxi', 'ğŸ›» Pickup Truck', 'ğŸšœ Slow Vehicle', 'ğŸ Mile Marker',
            'ğŸš Park & Ride', 'â›½ Truck Stop', 'ğŸ© Donut Shop', 'ğŸª Travel Center', 'ğŸš¿ Shower Sign',
            'ğŸ“¶ Signal Tower', 'ğŸŒ‰ Toll Booth', 'ğŸ’¨ Passing Zone', 'ğŸ›¤ï¸ Railroad Crossing', 'ğŸš§ Orange Cone',
            'ğŸ“ Lane Marker', 'ğŸš¥ Traffic Light', 'ğŸï¸ Scenic Overlook', 'ğŸ—ºï¸ State Line Sign', 'ğŸ¯ Next Exit Sign',
            'ğŸš“ Highway Patrol', 'ğŸš• Rideshare', 'ğŸš— Out-of-State Plate', 'â›°ï¸ Mountain View', 'ğŸŒ… Horizon'
        ];

        // Seasonal Road Trip Theme
        const BINGO_ITEMS_SEASONAL = [
            'ğŸŒ¸ Spring Flowers', 'ğŸŒ¼ Daisies', 'ğŸŒ· Tulips', 'ğŸ¦‹ Butterfly', 'ğŸ Bees',
            'ğŸŒ¤ï¸ Sunshine', 'ğŸ–ï¸ Beach', 'ğŸŒŠ Water', 'ğŸ¦¢ Swan', 'ğŸŒº Blooming Trees',
            'ğŸ‚ Fall Leaves', 'ğŸƒ Pumpkin Patch', 'ğŸŒ° Acorns', 'ğŸ¦ƒ Turkey Decor', 'ğŸ Maple Tree',
            'â„ï¸ Snow', 'â›„ Snowman', 'ğŸ„ Christmas Tree', 'ğŸ¦Œ Reindeer Decor', 'â›·ï¸ Ski Resort',
            'ğŸŒˆ Rainbow', 'âš¡ Lightning', 'ğŸŒ©ï¸ Storm Clouds', 'ğŸŒ… Sunrise/Sunset', 'ğŸŒ™ Full Moon',
            'â­ Stars Visible', 'â˜ï¸ Fluffy Clouds', 'ğŸŒ¬ï¸ Windy Day', 'ğŸŒ«ï¸ Fog', 'ğŸŒ§ï¸ Rain',
            'â˜€ï¸ Bright Sun', 'ğŸŒ¨ï¸ Snow Flurries', 'ğŸ€ Clover Field', 'ğŸŒ» Sunflower Field', 'ğŸ† Fireworks',
            'ğŸˆ Party Decorations', 'ğŸƒ Halloween Decor', 'ğŸ„ Holiday Lights', 'ğŸŒ¸ Cherry Blossoms', 'ğŸ‚ Autumn Colors',
            'ğŸ”ï¸ Snow-Capped Mountains', 'ğŸŒŠ Ocean Waves', 'ğŸï¸ Palm Trees', 'ğŸƒ Green Leaves', 'ğŸŒ¾ Golden Fields',
            'ğŸ¦† Migrating Birds', 'ğŸ» Wildlife Crossing', 'ğŸŒº Tropical Flowers', 'ğŸŒµ Desert Plants', 'ğŸœï¸ Sand Dunes'
        ];

        // All themes combined (default option)
        const BINGO_ITEMS_ALL = [
            ...BINGO_ITEMS,
            ...BINGO_ITEMS_CITY,
            ...BINGO_ITEMS_RURAL,
            ...BINGO_ITEMS_HIGHWAY,
            ...BINGO_ITEMS_SEASONAL
        ];

        // Theme collection object
        const BINGO_THEMES = {
            'all': { name: 'All Themes', items: BINGO_ITEMS_ALL, icon: 'ğŸŒŸ' },
            'classic': { name: 'Classic Mix', items: BINGO_ITEMS, icon: 'ğŸ¯' },
            'city': { name: 'City Trip', items: BINGO_ITEMS_CITY, icon: 'ğŸ™ï¸' },
            'rural': { name: 'Rural Trip', items: BINGO_ITEMS_RURAL, icon: 'ğŸŒ¾' },
            'highway': { name: 'Highway Trip', items: BINGO_ITEMS_HIGHWAY, icon: 'ğŸ›£ï¸' },
            'seasonal': { name: 'Seasonal', items: BINGO_ITEMS_SEASONAL, icon: 'ğŸŒ¸' }
        };

        let currentTheme = 'all'; // Track current selected theme (default to all themes)

        let bingoCard = [];
        let markedSquares = [];  // For team mode: boolean array
        let player1Marks = [];    // For competitive mode
        let player2Marks = [];    // For competitive mode
        let currentPlayer = 1;    // For competitive mode
        let bingoGameMode = 'team';  // 'team' or 'competitive'
        let player1Name = '';     // Player 1's name
        let player2Name = '';     // Player 2's name

        function showTravelBingo() {
            document.querySelector('.welcome').style.display = 'none';
            document.querySelector('.feature-grid').style.display = 'none';
            document.getElementById('plateTracker').style.display = 'none';
            document.getElementById('gamesMenu').style.display = 'none';
            document.getElementById('travelBingo').style.display = 'none';
            document.getElementById('bingoModeSelection').style.display = 'block';
        }

        function backToModeSelection() {
            document.getElementById('travelBingo').style.display = 'none';
            document.getElementById('bingoNameEntry').style.display = 'none';
            document.getElementById('bingoModeSelection').style.display = 'block';
        }

        function showNameEntry() {
            // Hide game, show name entry
            document.getElementById('travelBingo').style.display = 'none';
            document.getElementById('bingoModeSelection').style.display = 'none';
            document.getElementById('bingoNameEntry').style.display = 'block';

            // Pre-fill with existing names if available
            const p1Name = localStorage.getItem('player1Name') || '';
            const p2Name = localStorage.getItem('player2Name') || '';
            document.getElementById('player1NameInput').value = p1Name;
            document.getElementById('player2NameInput').value = p2Name;
        }

        function submitPlayerNames() {
            const p1Input = document.getElementById('player1NameInput').value.trim();
            const p2Input = document.getElementById('player2NameInput').value.trim();

            // Use entered names or default to "Player 1" / "Player 2"
            player1Name = p1Input || 'Player 1';
            player2Name = p2Input || 'Player 2';

            // Save to localStorage
            localStorage.setItem('player1Name', player1Name);
            localStorage.setItem('player2Name', player2Name);

            // Show the game
            document.getElementById('bingoNameEntry').style.display = 'none';
            document.getElementById('travelBingo').style.display = 'block';

            // Update button labels
            updatePlayerSelector();
        }

        function startCompetitiveMode() {
            bingoGameMode = 'competitive';

            // Load names from localStorage
            player1Name = localStorage.getItem('player1Name') || '';
            player2Name = localStorage.getItem('player2Name') || '';

            // If names aren't set, show name entry screen
            if (!player1Name || !player2Name) {
                showNameEntry();
                return;
            }

            // Otherwise, proceed to game
            document.getElementById('bingoModeSelection').style.display = 'none';
            document.getElementById('travelBingo').style.display = 'block';
            document.getElementById('bingoTitle').textContent = 'ğŸ Competitive Bingo';
            document.getElementById('bingoPlayerSelector').style.display = 'block';
            document.getElementById('bingoInstructions').innerHTML = `
                <h3 style="color: #f1f5f9; margin-bottom: 1rem;">How to Play:</h3>
                <ul style="color: #94a3b8; line-height: 1.8;">
                    <li>Select your player number above before marking squares</li>
                    <li>When you spot an item, click it to mark it with your checkmark</li>
                    <li>${player1Name}: BLUE âœ“ in upper right corner</li>
                    <li>${player2Name}: RED âœ“ in upper left corner</li>
                    <li>Both can mark the same square - both checkmarks will show</li>
                    <li>First player to get 5 in a row with their color wins!</li>
                    <li>â­ BLACKOUT: Fill all 25 squares for an epic win!</li>
                    <li>The center square is a FREE space for both players</li>
                </ul>
            `;

            // Load saved competitive game or generate new one
            const savedCard = localStorage.getItem('bingoCard_competitive');
            const savedP1 = localStorage.getItem('player1Marks');
            const savedP2 = localStorage.getItem('player2Marks');
            const savedCurrent = localStorage.getItem('currentPlayer');

            if (savedCard) {
                bingoCard = JSON.parse(savedCard);
                player1Marks = savedP1 ? JSON.parse(savedP1) : Array(25).fill(false);
                player2Marks = savedP2 ? JSON.parse(savedP2) : Array(25).fill(false);
                player1Marks[12] = true;  // Center FREE for both
                player2Marks[12] = true;
                currentPlayer = savedCurrent ? parseInt(savedCurrent) : 1;
            } else {
                generateNewBingoCard();
            }

            // Load saved theme preference
            const savedTheme = localStorage.getItem('bingoTheme');
            if (savedTheme && BINGO_THEMES[savedTheme]) {
                currentTheme = savedTheme;
            }

            updatePlayerSelector();
            renderBingoCard();
            updateThemeIndicator();
        }

        function startTeamMode() {
            bingoGameMode = 'team';
            document.getElementById('bingoModeSelection').style.display = 'none';
            document.getElementById('travelBingo').style.display = 'block';
            document.getElementById('bingoTitle').textContent = 'ğŸ¤ Team Bingo';
            document.getElementById('bingoPlayerSelector').style.display = 'none';
            document.getElementById('bingoInstructions').innerHTML = `
                <h3 style="color: #f1f5f9; margin-bottom: 1rem;">How to Play:</h3>
                <ul style="color: #94a3b8; line-height: 1.8;">
                    <li>Work together to spot items on your road trip</li>
                    <li>Anyone can mark any square when you see it</li>
                    <li>Get 5 in a row together to win as a team!</li>
                    <li>â­ BLACKOUT: Fill all 25 squares for an epic team win!</li>
                    <li>The center square is a FREE space - already marked for you</li>
                </ul>
            `;

            // Load saved team game or generate new one
            const savedCard = localStorage.getItem('bingoCard_team');
            const savedMarks = localStorage.getItem('bingoMarks_team');

            if (savedCard) {
                bingoCard = JSON.parse(savedCard);
                markedSquares = savedMarks ? JSON.parse(savedMarks) : Array(25).fill(false);
                markedSquares[12] = true;  // Center is FREE
            } else {
                generateNewBingoCard();
            }

            // Load saved theme preference
            const savedTheme = localStorage.getItem('bingoTheme');
            if (savedTheme && BINGO_THEMES[savedTheme]) {
                currentTheme = savedTheme;
            }

            renderBingoCard();
            updateThemeIndicator();
        }

        function selectPlayer(playerNum) {
            currentPlayer = playerNum;
            localStorage.setItem('currentPlayer', currentPlayer);
            updatePlayerSelector();
        }

        function updatePlayerSelector() {
            const btn1 = document.getElementById('selectPlayer1');
            const btn2 = document.getElementById('selectPlayer2');

            // Update button labels with player names
            document.getElementById('player1ButtonName').textContent = player1Name || 'Player 1';
            document.getElementById('player2ButtonName').textContent = player2Name || 'Player 2';

            if (currentPlayer === 1) {
                btn1.style.opacity = '1';
                btn1.style.transform = 'scale(1.05)';
                btn2.style.opacity = '0.5';
                btn2.style.transform = 'scale(1)';
            } else {
                btn1.style.opacity = '0.5';
                btn1.style.transform = 'scale(1)';
                btn2.style.opacity = '1';
                btn2.style.transform = 'scale(1.05)';
            }
        }

        function generateNewBingoCard() {
            // Get items from current theme
            const themeItems = BINGO_THEMES[currentTheme].items;
            // Remove duplicates by extracting the text portion and keeping unique items
            const seen = new Set();
            const uniqueItems = themeItems.filter(item => {
                // Extract text part (after emoji) for comparison
                const textPart = item.split(' ').slice(1).join(' ').toLowerCase();
                if (seen.has(textPart)) {
                    return false;
                }
                seen.add(textPart);
                return true;
            });
            // Shuffle and pick 24 random items (center will be FREE)
            const shuffled = [...uniqueItems].sort(() => Math.random() - 0.5);
            bingoCard = shuffled.slice(0, 24);
            // Insert FREE space in the middle (index 12)
            bingoCard.splice(12, 0, 'â­ FREE');

            if (bingoGameMode === 'competitive') {
                player1Marks = Array(25).fill(false);
                player2Marks = Array(25).fill(false);
                player1Marks[12] = true;  // Center is FREE for both
                player2Marks[12] = true;
                currentPlayer = 1;

                localStorage.setItem('bingoCard_competitive', JSON.stringify(bingoCard));
                localStorage.setItem('player1Marks', JSON.stringify(player1Marks));
                localStorage.setItem('player2Marks', JSON.stringify(player2Marks));
                localStorage.setItem('currentPlayer', currentPlayer);
                updatePlayerSelector();
            } else {
                markedSquares = Array(25).fill(false);
                markedSquares[12] = true;  // Center is FREE

                localStorage.setItem('bingoCard_team', JSON.stringify(bingoCard));
                localStorage.setItem('bingoMarks_team', JSON.stringify(markedSquares));
            }

            document.getElementById('bingoWinMessage').style.display = 'none';
            renderBingoCard();
        }

        function resetBingoCard() {
            if (bingoGameMode === 'competitive') {
                player1Marks = Array(25).fill(false);
                player2Marks = Array(25).fill(false);
                player1Marks[12] = true;
                player2Marks[12] = true;
                currentPlayer = 1;

                localStorage.setItem('player1Marks', JSON.stringify(player1Marks));
                localStorage.setItem('player2Marks', JSON.stringify(player2Marks));
                localStorage.setItem('currentPlayer', currentPlayer);
                updatePlayerSelector();
            } else {
                markedSquares = Array(25).fill(false);
                markedSquares[12] = true;

                localStorage.setItem('bingoMarks_team', JSON.stringify(markedSquares));
            }

            document.getElementById('bingoWinMessage').style.display = 'none';
            renderBingoCard();
        }

        function toggleBingoSquare(index) {
            // Can't toggle FREE space
            if (index === 12) return;

            if (bingoGameMode === 'competitive') {
                // In competitive mode, mark for selected player
                if (currentPlayer === 1) {
                    player1Marks[index] = !player1Marks[index];
                } else {
                    player2Marks[index] = !player2Marks[index];
                }

                localStorage.setItem('player1Marks', JSON.stringify(player1Marks));
                localStorage.setItem('player2Marks', JSON.stringify(player2Marks));
            } else {
                // Team mode
                markedSquares[index] = !markedSquares[index];
                localStorage.setItem('bingoMarks_team', JSON.stringify(markedSquares));
            }

            renderBingoCard();
            checkForBingo();
        }

        function renderBingoCard() {
            const grid = document.getElementById('bingoGrid');
            grid.innerHTML = bingoCard.map((item, index) => {
                const isFree = index === 12;
                let isMarked, bgColor, textColor;

                // Split emoji from text
                const parts = item.split(' ');
                const emoji = parts[0];
                const text = parts.slice(1).join(' ');

                if (bingoGameMode === 'competitive') {
                    const p1Marked = player1Marks[index];
                    const p2Marked = player2Marks[index];

                    // Always white background in competitive mode
                    isMarked = p1Marked || p2Marked;
                    bgColor = 'white';
                    textColor = '#333';

                    // Generate checkmark overlays
                    let checkmarks = '';
                    if (p1Marked) {
                        // Blue checkmark in upper right
                        checkmarks += '<div style="position: absolute; top: 2px; right: 2px; color: #007bff; font-size: clamp(1rem, 3vw, 1.5rem); font-weight: bold; line-height: 1;">âœ“</div>';
                    }
                    if (p2Marked) {
                        // Red checkmark in upper left
                        checkmarks += '<div style="position: absolute; top: 2px; left: 2px; color: #c4b5fd; font-size: clamp(1rem, 3vw, 1.5rem); font-weight: bold; line-height: 1;">âœ“</div>';
                    }

                    return `
                        <div
                            onclick="toggleBingoSquare(${index})"
                            style="
                                aspect-ratio: 1;
                                background: ${bgColor};
                                border-radius: 6px;
                                display: flex;
                                flex-direction: column;
                                align-items: center;
                                justify-content: center;
                                cursor: ${isFree ? 'default' : 'pointer'};
                                transition: all 0.2s;
                                box-shadow: ${isMarked ? '0 4px 8px rgba(0, 0, 0, 0.4)' : '0 2px 4px rgba(0,0,0,0.1)'};
                                padding: 0.2rem;
                                text-align: center;
                                color: ${textColor};
                                transform: ${isMarked ? 'scale(0.95)' : 'scale(1)'};
                                position: relative;
                                gap: 0.1rem;
                            "
                            ${!isFree ? `onmouseover="if(!${isMarked}) this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(${isMarked ? '0.95' : '1'})'"` : ''}
                        >
                            ${checkmarks}
                            <span style="font-size: clamp(3rem, 12vw, 5rem); line-height: 1;">${emoji}</span>
                            <span style="font-size: clamp(0.7rem, 2.5vw, 1rem); line-height: 1.1; font-weight: 500;">${text}</span>
                        </div>
                    `;
                } else {
                    // Team mode
                    isMarked = markedSquares[index];
                    bgColor = isMarked ? 'linear-gradient(135deg, #28a745 0%, #20c997 100%)' : 'white';
                    textColor = isMarked ? 'white' : '#333';

                    return `
                        <div
                            onclick="toggleBingoSquare(${index})"
                            style="
                                aspect-ratio: 1;
                                background: ${bgColor};
                                border-radius: 6px;
                                display: flex;
                                flex-direction: column;
                                align-items: center;
                                justify-content: center;
                                cursor: ${isFree ? 'default' : 'pointer'};
                                transition: all 0.2s;
                                box-shadow: ${isMarked ? '0 4px 8px rgba(0, 0, 0, 0.4)' : '0 2px 4px rgba(0,0,0,0.1)'};
                                padding: 0.2rem;
                                text-align: center;
                                color: ${textColor};
                                transform: ${isMarked ? 'scale(0.95)' : 'scale(1)'};
                                gap: 0.1rem;
                            "
                            ${!isFree ? `onmouseover="if(!${isMarked}) this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(${isMarked ? '0.95' : '1'})'"` : ''}
                        >
                            <span style="font-size: clamp(3rem, 12vw, 5rem); line-height: 1;">${emoji}</span>
                            <span style="font-size: clamp(0.7rem, 2.5vw, 1rem); line-height: 1.1; font-weight: 500;">${text}</span>
                        </div>
                    `;
                }
            }).join('');
        }

        function checkForBingo() {
            if (bingoGameMode === 'competitive') {
                // Check Player 1 for blackout first (more impressive!)
                if (checkPlayerBlackout(player1Marks)) {
                    showBingoWin(1, 'blackout');
                    return;
                }
                // Check Player 2 for blackout
                if (checkPlayerBlackout(player2Marks)) {
                    showBingoWin(2, 'blackout');
                    return;
                }
                // Check Player 1 for bingo
                if (checkPlayerBingo(player1Marks)) {
                    showBingoWin(1, 'bingo');
                    return;
                }
                // Check Player 2 for bingo
                if (checkPlayerBingo(player2Marks)) {
                    showBingoWin(2, 'bingo');
                    return;
                }
            } else {
                // Team mode - check blackout first
                if (checkPlayerBlackout(markedSquares)) {
                    showBingoWin(0, 'blackout');  // 0 = team
                    return;
                }
                // Check for regular bingo
                if (checkPlayerBingo(markedSquares)) {
                    showBingoWin(0, 'bingo');  // 0 = team
                }
            }
        }

        function checkPlayerBingo(marks) {
            // Check rows
            for (let row = 0; row < 5; row++) {
                if (marks[row * 5] && marks[row * 5 + 1] && marks[row * 5 + 2] && marks[row * 5 + 3] && marks[row * 5 + 4]) {
                    return true;
                }
            }

            // Check columns
            for (let col = 0; col < 5; col++) {
                if (marks[col] && marks[col + 5] && marks[col + 10] && marks[col + 15] && marks[col + 20]) {
                    return true;
                }
            }

            // Check diagonals
            if (marks[0] && marks[6] && marks[12] && marks[18] && marks[24]) {
                return true;
            }
            if (marks[4] && marks[8] && marks[12] && marks[16] && marks[20]) {
                return true;
            }

            return false;
        }

        function checkPlayerBlackout(marks) {
            // Check if all 25 squares are marked
            return marks.every(mark => mark === true);
        }

        function showBingoWin(winner, winType = 'bingo') {
            const winMsg = document.getElementById('bingoWinMessage');
            const winText = document.getElementById('bingoWinText');
            let winnerName;
            const isBlackout = winType === 'blackout';

            if (winner === 1) {
                winnerName = player1Name || 'Player 1';
                if (isBlackout) {
                    winText.textContent = `â­ BLACKOUT! ${winnerName} Wins! â­`;
                    winMsg.style.background = 'linear-gradient(135deg, #FFD700 0%, #FFA500 100%)'; // Gold gradient
                } else {
                    winText.textContent = `ğŸ”µ ${winnerName} Wins!`;
                    winMsg.style.background = 'linear-gradient(135deg, #007bff 0%, #0056b3 100%)';
                }
            } else if (winner === 2) {
                winnerName = player2Name || 'Player 2';
                if (isBlackout) {
                    winText.textContent = `â­ BLACKOUT! ${winnerName} Wins! â­`;
                    winMsg.style.background = 'linear-gradient(135deg, #FFD700 0%, #FFA500 100%)'; // Gold gradient
                } else {
                    winText.textContent = `ğŸ”´ ${winnerName} Wins!`;
                    winMsg.style.background = 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100())';
                }
            } else {
                winnerName = 'Team';
                if (isBlackout) {
                    winText.textContent = 'â­ BLACKOUT! Team Wins! â­';
                    winMsg.style.background = 'linear-gradient(135deg, #FFD700 0%, #FFA500 100%)'; // Gold gradient
                } else {
                    winText.textContent = 'Team Bingo!';
                    winMsg.style.background = 'linear-gradient(135deg, #28a745 0%, #20c997 100%)';
                }
            }

            // Record the win in statistics
            recordBingoWin(winnerName, winType);

            winMsg.style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // Trigger confetti celebration!
            createConfetti();
        }

        function createConfetti() {
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#6c5ce7', '#a29bfe', '#fd79a8', '#fdcb6e', '#e17055', '#00b894'];
            const confettiCount = 150;

            for (let i = 0; i < confettiCount; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';

                    // Random properties
                    const left = Math.random() * 100;
                    const animationDuration = 2 + Math.random() * 3; // 2-5 seconds
                    const delay = Math.random() * 0.5; // Stagger the start
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    const size = 8 + Math.random() * 6; // 8-14px

                    confetti.style.left = `${left}%`;
                    confetti.style.backgroundColor = color;
                    confetti.style.width = `${size}px`;
                    confetti.style.height = `${size}px`;
                    confetti.style.animation = `confetti-fall ${animationDuration}s linear ${delay}s forwards`;
                    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0'; // Mix circles and squares

                    document.body.appendChild(confetti);

                    // Remove confetti after animation
                    setTimeout(() => {
                        confetti.remove();
                    }, (animationDuration + delay) * 1000);
                }, i * 15); // Stagger creation
            }
        }

        // Bingo Statistics Functions
        function getBingoStats() {
            const stats = localStorage.getItem('bingoStats');
            return stats ? JSON.parse(stats) : {};
        }

        function saveBingoStats(stats) {
            localStorage.setItem('bingoStats', JSON.stringify(stats));
        }

        function recordBingoWin(playerName, winType = 'bingo') {
            const stats = getBingoStats();

            if (!stats[playerName]) {
                stats[playerName] = {
                    bingos: 0,
                    blackouts: 0,
                    totalWins: 0,
                    lastWinDate: null
                };
            }

            // Record the win
            if (winType === 'bingo') {
                stats[playerName].bingos++;
            } else if (winType === 'blackout') {
                stats[playerName].blackouts++;
            }
            stats[playerName].totalWins++;
            stats[playerName].lastWinDate = new Date().toLocaleDateString();

            saveBingoStats(stats);
        }

        function showBingoStats() {
            const stats = getBingoStats();
            const modal = document.getElementById('bingoStatsModal');
            const content = document.getElementById('bingoStatsContent');

            if (Object.keys(stats).length === 0) {
                content.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: #94a3b8;">
                        <p style="font-size: 1.2rem;">No statistics yet!</p>
                        <p style="margin-top: 0.5rem;">Play some games to start tracking your wins.</p>
                    </div>
                `;
            } else {
                // Sort by total wins descending
                const sortedPlayers = Object.entries(stats).sort((a, b) => b[1].totalWins - a[1].totalWins);

                content.innerHTML = sortedPlayers.map(([playerName, playerStats], index) => {
                    const isTeam = playerName === 'Team';
                    const gradient = isTeam ?
                        'linear-gradient(135deg, #28a745 0%, #20c997 100%)' :
                        index % 2 === 0 ?
                            'linear-gradient(135deg, #007bff 0%, #0056b3 100%)' :
                            'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)';

                    return `
                        <div class="stats-player-card" style="background: ${gradient};">
                            <h3 style="margin: 0 0 1rem 0; font-size: 1.5rem;">${index + 1}. ${playerName}</h3>
                            <div class="stats-row">
                                <span class="stats-label">ğŸ¯ Bingos:</span>
                                <span class="stats-value">${playerStats.bingos}</span>
                            </div>
                            <div class="stats-row">
                                <span class="stats-label">â­ Blackouts:</span>
                                <span class="stats-value">${playerStats.blackouts}</span>
                            </div>
                            <div class="stats-row" style="border-top: 1px solid rgba(255,255,255,0.3); padding-top: 0.75rem; margin-top: 0.5rem;">
                                <span class="stats-label">ğŸ† Total Wins:</span>
                                <span class="stats-value">${playerStats.totalWins}</span>
                            </div>
                            ${playerStats.lastWinDate ? `
                                <div style="text-align: center; margin-top: 1rem; opacity: 0.8; font-size: 0.85rem;">
                                    Last win: ${playerStats.lastWinDate}
                                </div>
                            ` : ''}
                        </div>
                    `;
                }).join('');
            }

            modal.classList.add('show');
        }

        function closeBingoStats() {
            document.getElementById('bingoStatsModal').classList.remove('show');
        }

        function clearBingoStats() {
            if (confirm('Are you sure you want to clear all bingo statistics? This cannot be undone.')) {
                localStorage.removeItem('bingoStats');
                showBingoStats(); // Refresh the display
            }
        }

        // Theme Selector Functions
        function showThemeSelector() {
            const modal = document.getElementById('themeSelectorModal');
            const content = document.getElementById('themeSelectorContent');

            // Render theme cards
            content.innerHTML = Object.entries(BINGO_THEMES).map(([key, theme]) => {
                const isSelected = key === currentTheme;
                const borderStyle = isSelected ? 'border: 2px solid #60a5fa;' : 'border: 1px solid rgba(255,255,255,0.1);';
                const selectedBadge = isSelected ? '<div style="position: absolute; top: 10px; right: 10px; background: #60a5fa; color: white; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.75rem; font-weight: bold;">ACTIVE</div>' : '';

                return `
                    <div onclick="selectTheme('${key}')" style="
                        position: relative;
                        background: rgba(255,255,255,0.05);
                        ${borderStyle}
                        border-radius: 15px;
                        padding: 1.5rem;
                        text-align: center;
                        cursor: pointer;
                        transition: all 0.2s;
                        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
                    " onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'; this.style.background='rgba(255,255,255,0.1)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'; this.style.background='rgba(255,255,255,0.05)';">
                        ${selectedBadge}
                        <div style="font-size: 3rem; margin-bottom: 0.5rem;">${theme.icon}</div>
                        <h3 style="color: #f1f5f9; margin-bottom: 0.5rem;">${theme.name}</h3>
                        <p style="color: #94a3b8; font-size: 0.9rem;">${theme.items.length} items</p>
                    </div>
                `;
            }).join('');

            modal.classList.add('show');
        }

        function closeThemeSelector() {
            document.getElementById('themeSelectorModal').classList.remove('show');
        }

        function selectTheme(themeKey) {
            currentTheme = themeKey;
            localStorage.setItem('bingoTheme', themeKey);
            updateThemeIndicator();
            closeThemeSelector();
            // Optionally generate a new card immediately
            generateNewBingoCard();
        }

        function updateThemeIndicator() {
            const indicator = document.getElementById('currentThemeName');
            if (indicator) {
                const theme = BINGO_THEMES[currentTheme];
                indicator.textContent = `${theme.icon} ${theme.name} (${theme.items.length} items)`;
            }
        }

        // Show toast notification
        function showToast(message, duration = 3000) {
            const toast = document.getElementById('updateToast');
            toast.textContent = message;
            toast.classList.add('show');

            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }

        // Pull to refresh functionality
        let pullStartY = 0;
        let pulling = false;

        document.addEventListener('touchstart', (e) => {
            if (window.scrollY === 0) {
                pullStartY = e.touches[0].clientY;
            }
        });

        document.addEventListener('touchmove', (e) => {
            if (window.scrollY === 0 && pullStartY > 0) {
                const pullDistance = e.touches[0].clientY - pullStartY;
                if (pullDistance > 50 && !pulling) {
                    pulling = true;
                    document.getElementById('pullToRefresh').classList.add('visible');
                }
            }
        });

        document.addEventListener('touchend', (e) => {
            if (pulling) {
                window.location.reload();
            }
            pulling = false;
            pullStartY = 0;
            setTimeout(() => {
                document.getElementById('pullToRefresh').classList.remove('visible');
            }, 300);
        });

        // Register service worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => {
                        console.log('Service Worker registered');

                        // Check for updates every 10 seconds
                        setInterval(() => {
                            reg.update();
                        }, 10000);

                        // Check for updates immediately
                        reg.update();
                    })
                    .catch(err => console.log('Service Worker registration failed:', err));

                // Listen for update messages from service worker
                navigator.serviceWorker.addEventListener('message', event => {
                    if (event.data.type === 'UPDATE_AVAILABLE') {
                        showToast(`App updated to v${event.data.version}! Reloading...`);
                        // Auto-reload after 2 seconds
                        setTimeout(() => {
                            window.location.reload();
                        }, 2000);
                    }
                });
            });
        }
    </script>
    <script src="travelFacts.js?v=1.134.7"></script>
    <script src="games/battleship.js?v=1.17.0"></script>
    <script src="games/connect4.js?v=1.31.2"></script>
    <script src="games/minesweeper.js?v=1.57.2"></script>
    <script src="games/war.js?v=1.17.0"></script>
    <script src="games/trash.js?v=1.17.0"></script>
    <script src="games/othello.js?v=1.19.0"></script>
    <script src="games/would-you-rather.js?v=1.21.1"></script>
    <script src="games/dots-and-boxes.js?v=1.28.3"></script>
    <script src="games/tictactoe.js?v=1.86.0"></script>
    <script src="games/guess-who.js?v=1.31.1"></script>
    <script src="games/joust.js?v=1.32.0"></script>
    <script src="games/tunnel-runner.js?v=1.39.1"></script>
    <script src="games/downhill-skier.js?v=1.120.0"></script>
    <script src="games/pacman.js?v=1.50.1"></script>
    <script src="games/galaxian.js?v=1.56.1"></script>
    <script src="games/galaga.js?v=1.56.1"></script>
    <script src="games/centipede.js?v=1.62.0"></script>
    <script src="games/asteroids.js?v=1.68.0"></script>
    <script src="games/qix.js?v=1.70.0"></script>
    <script src="games/drugwars.js?v=1.119.0"></script>
    <script src="games/breakout.js?v=1.0.0"></script>
    <script src="games/frogger.js?v=1.0.0"></script>
        <script src="games/caverns-of-mars.js?v=1.4.0"></script>
    <script src="games/snake.js?v=1.0.0"></script>
    <script src="games/2048.js?v=1.0.0"></script>
    <script src="games/word-ladder.js?v=1.127.2"></script>
    <script src="games/spelling-bee.js?v=1.128.3"></script>
    <script src="games/ghost.js?v=1.128.23"></script>
    <script src="games/wordle.js?v=1.130.0"></script>
    <script src="games/scattergories.js?v=1.134.3"></script>
    <script src="games/boggle.js?v=1.134.6"></script>
    <script src="games/anagrams.js?v=1.134.4"></script>
    <script src="games/connections.js?v=1.135.0"></script>
    <script src="games/hangman.js?v=1.135.0"></script>
    <script src="games/letterboxed.js?v=1.135.0"></script>
    <script src="games/crossword.js?v=1.138.0"></script>
    <script src="games/cryptogram.js?v=1.138.0"></script>
    <script src="games/texttwist.js?v=1.138.0"></script>
</body>
</html>
